<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>íˆ¬ì ê´€ë¦¬ ì‹œìŠ¤í…œ Complete</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #2563eb;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --purple: #8b5cf6;
            --dark: #1f2937;
            --gray: #6b7280;
            --light: #f3f4f6;
            --border: #e5e7eb;
            --white: #ffffff;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 15px;
            color: var(--dark);
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
        }

        /* í—¤ë” */
        header {
            background: white;
            padding: 25px 30px;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        h1 {
            color: var(--dark);
            font-size: 28px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .subtitle {
            font-size: 13px;
            color: var(--gray);
            margin-top: 5px;
        }

        .header-actions {
            display: flex;
            gap: 10px;
        }

        .btn-icon {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            border: none;
            background: var(--light);
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-icon:hover {
            background: var(--primary);
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(37, 99, 235, 0.4);
        }

        .nav-tabs {
            display: flex;
            gap: 8px;
            overflow-x: auto;
            padding-bottom: 5px;
        }

        .nav-tab {
            padding: 12px 20px;
            background: var(--light);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            color: var(--dark);
            transition: all 0.3s;
            white-space: nowrap;
            font-size: 14px;
        }

        .nav-tab.active {
            background: var(--primary);
            color: white;
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
        }

        .nav-tab:hover:not(.active) {
            background: #e5e7eb;
        }

        /* ì„¹ì…˜ */
        .section {
            display: none;
        }

        .section.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ì¹´ë“œ */
        .card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .card h2 {
            color: var(--dark);
            font-size: 20px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--light);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* ê·¸ë¦¬ë“œ */
        .grid {
            display: grid;
            gap: 20px;
        }

        .grid-2 { grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); }
        .grid-3 { grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); }
        .grid-4 { grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); }

        /* í†µê³„ ì¹´ë“œ */
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .stat-label {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 8px;
        }

        .stat-value {
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-change {
            font-size: 14px;
            opacity: 0.95;
        }

        /* ì°¨íŠ¸ */
        .chart-container {
            position: relative;
            height: 300px;
            margin-top: 20px;
        }

        /* ì•„ì´í…œ ì¹´ë“œ */
        .item-card {
            background: var(--light);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 15px;
            transition: all 0.3s;
        }

        .item-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }

        .item-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .item-title {
            font-size: 18px;
            font-weight: bold;
            color: var(--dark);
        }

        .item-meta {
            display: flex;
            gap: 15px;
            margin: 10px 0;
            font-size: 14px;
            color: var(--gray);
            flex-wrap: wrap;
        }

        .item-content {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-top: 12px;
            line-height: 1.6;
            color: #4b5563;
        }

        /* í¼ */
        .form-group {
            margin-bottom: 20px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        label {
            display: block;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 8px;
            font-size: 14px;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-family: inherit;
            font-size: 14px;
            transition: all 0.3s;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        /* ë²„íŠ¼ */
        button {
            padding: 12px 24px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        button:hover {
            background: #1d4ed8;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(37, 99, 235, 0.3);
        }

        .btn-secondary { background: var(--gray); }
        .btn-success { background: var(--success); }
        .btn-danger { background: var(--danger); }
        .btn-warning { background: var(--warning); }
        .btn-sm { padding: 8px 16px; font-size: 13px; }

        /* ë°°ì§€ */
        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .badge-high { background: #fee2e2; color: var(--danger); }
        .badge-medium { background: #fef3c7; color: var(--warning); }
        .badge-low { background: #dbeafe; color: var(--primary); }
        .badge-success { background: #d1fae5; color: var(--success); }

        /* ì§„í–‰ë¥  */
        .progress {
            width: 100%;
            height: 12px;
            background: var(--light);
            border-radius: 20px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--success), var(--primary));
            transition: width 0.5s ease;
        }

        /* ìŠ¤ì½”ì–´ */
        .score-item {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .score-label {
            min-width: 100px;
            font-size: 14px;
            color: var(--gray);
        }

        .score-bar {
            flex: 1;
            height: 10px;
            background: var(--light);
            border-radius: 20px;
            overflow: hidden;
        }

        .score-fill {
            height: 100%;
            background: linear-gradient(90deg, #10b981, #3b82f6);
            transition: width 0.5s;
        }

        .score-value {
            min-width: 40px;
            text-align: right;
            font-size: 14px;
            font-weight: bold;
        }

        /* í…Œì´ë¸” */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        th {
            background: var(--light);
            padding: 12px;
            text-align: left;
            font-weight: 600;
            font-size: 13px;
            border-bottom: 2px solid var(--border);
        }

        td {
            padding: 12px;
            border-bottom: 1px solid var(--border);
            font-size: 14px;
        }

        tr:hover {
            background: var(--light);
        }

        /* ë¹ˆ ìƒíƒœ */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--gray);
        }

        .empty-icon {
            font-size: 64px;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        /* ê°€ê²© í‘œì‹œ */
        .price-up { color: var(--danger); }
        .price-down { color: var(--primary); }

        /* ë°˜ì‘í˜• */
        @media (max-width: 768px) {
            .grid, .grid-2, .grid-3, .grid-4 {
                grid-template-columns: 1fr;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            h1 { font-size: 22px; }
            .stat-value { font-size: 24px; }
            .chart-container { height: 250px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-top">
                <div>
                    <h1>ğŸ“Š íˆ¬ì ê´€ë¦¬ ì‹œìŠ¤í…œ Complete</h1>
                    <p class="subtitle">ì˜¬ì¸ì› íˆ¬ì ê´€ë¦¬ í”Œë«í¼</p>
                </div>
                <div class="header-actions">
                    <span id="currentUser" style="margin-right: 15px; font-weight: 600; color: var(--dark);"></span>
                    <button class="btn-icon" onclick="exportData()" title="ë°ì´í„° ë‚´ë³´ë‚´ê¸°">ğŸ“¥</button>
                    <button class="btn-icon" onclick="document.getElementById('importFile').click()" title="ë°ì´í„° ê°€ì ¸ì˜¤ê¸°">ğŸ“¤</button>
                    <input type="file" id="importFile" style="display: none" accept=".json" onchange="importData(event)">
                    <button class="btn-icon" onclick="logout()" title="ë¡œê·¸ì•„ì›ƒ">ğŸšª</button>
                </div>
            </div>
            
            <div class="nav-tabs">
                <button class="nav-tab active" onclick="showSection('dashboard')">ğŸ“Š ëŒ€ì‹œë³´ë“œ</button>
                <button class="nav-tab" onclick="showSection('principles')">ğŸ“œ íˆ¬ì ì›ì¹™</button>
                <button class="nav-tab" onclick="showSection('watchlist')">ğŸ‘€ ê´€ì‹¬ ì¢…ëª©</button>
                <button class="nav-tab" onclick="showSection('portfolio')">ğŸ’¼ í¬íŠ¸í´ë¦¬ì˜¤</button>
                <button class="nav-tab" onclick="showSection('trades')">ğŸ“ˆ ë§¤ë§¤ ì¼ì§€</button>
                <button class="nav-tab" onclick="showSection('analysis')">ğŸ” ì¢…ëª© ë¶„ì„</button>
                <button class="nav-tab" onclick="showSection('screener')">ğŸ¯ ì¢…ëª© ìŠ¤í¬ë¦¬ë„ˆ</button>
                <button class="nav-tab" onclick="showSection('performance')">ğŸ“‰ ìˆ˜ìµë¥ </button>
                <button class="nav-tab" onclick="showSection('goals')">ğŸ† ëª©í‘œ</button>
                <button class="nav-tab" onclick="showSection('tax')">ğŸ’° ì„¸ê¸ˆ</button>
                <button class="nav-tab" onclick="showSection('mindset')">ğŸ§  ë§ˆì¸ë“œ ì»¨íŠ¸ë¡¤</button>
                <button class="nav-tab" onclick="showSection('account')">âš™ï¸ ê³„ì • ê´€ë¦¬</button>
            </div>
        </header>

        <main id="mainContent">
            <!-- ëŒ€ì‹œë³´ë“œ -->
            <div id="dashboard" class="section active">
                <div class="grid grid-4">
                    <div class="stat-card">
                        <div class="stat-label">ì´ ìì‚°</div>
                        <div class="stat-value" id="totalAssets">0ì›</div>
                        <div class="stat-change" id="assetsChange">ì „ì¼ ëŒ€ë¹„ 0ì›</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">ì´ ìˆ˜ìµë¥ </div>
                        <div class="stat-value" id="totalReturn">0%</div>
                        <div class="stat-change" id="returnAmount">+0ì›</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">ë³´ìœ  ì¢…ëª©</div>
                        <div class="stat-value" id="stockCount">0ê°œ</div>
                        <div class="stat-change" id="avgReturn">í‰ê·  0%</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">ì´ë²ˆ ë‹¬</div>
                        <div class="stat-value" id="monthTrades">0íšŒ</div>
                        <div class="stat-change" id="monthProfit">0ì›</div>
                    </div>
                </div>

                <div class="card">
                    <h2>ğŸ“ˆ í¬íŠ¸í´ë¦¬ì˜¤ ì¶”ì´</h2>
                    <div class="chart-container">
                        <canvas id="portfolioChart"></canvas>
                    </div>
                </div>

                <div class="grid grid-2">
                    <div class="card">
                        <h2>ğŸ’¡ ë¹ ë¥¸ ë©”ëª¨</h2>
                        <textarea id="quickMemo" placeholder="ì˜¤ëŠ˜ì˜ ì‹œì¥ ìƒí™©, ì•„ì´ë””ì–´ ë“±..."></textarea>
                        <button onclick="saveQuickMemo()" style="margin-top: 10px;">ğŸ’¾ ì €ì¥</button>
                    </div>
                    <div class="card">
                        <h2>ğŸ¯ ì˜¤ëŠ˜ì˜ ì›ì¹™</h2>
                        <div id="todayPrinciple"></div>
                    </div>
                </div>
            </div>

            <!-- íˆ¬ì ì›ì¹™ -->
            <div id="principles" class="section">
                <div class="card">
                    <h2>ğŸ“œ ë‚˜ì˜ íˆ¬ì ì›ì¹™</h2>
                    <div id="principlesList"></div>
                    
                    <hr style="margin: 30px 0; border: none; border-top: 2px solid var(--light);">
                    
                    <h3 style="margin-bottom: 20px;">ìƒˆ ì›ì¹™ ì¶”ê°€</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>ì›ì¹™ ì œëª©</label>
                            <input type="text" id="principleTitle" placeholder="ì˜ˆ: ì†ì ˆ ì›ì¹™">
                        </div>
                        <div class="form-group">
                            <label>ì¤‘ìš”ë„</label>
                            <select id="principlePriority">
                                <option value="high">ë†’ìŒ</option>
                                <option value="medium">ë³´í†µ</option>
                                <option value="low">ë‚®ìŒ</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>ë‚´ìš©</label>
                        <textarea id="principleContent" placeholder="ìƒì„¸ ë‚´ìš©..."></textarea>
                    </div>
                    <button onclick="addPrinciple()">â• ì›ì¹™ ì¶”ê°€</button>
                </div>
            </div>

            <!-- ê´€ì‹¬ ì¢…ëª© -->
            <div id="watchlist" class="section">
                <div class="card">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2 style="margin: 0; padding: 0; border: none;">ğŸ‘€ ê´€ì‹¬ ì¢…ëª©</h2>
                        <button class="btn-success btn-sm" onclick="updateWatchlistPrices()">ğŸ”„ ì „ì²´ ê°€ê²© ì—…ë°ì´íŠ¸</button>
                    </div>
                    <div id="watchlistItems"></div>
                    
                    <hr style="margin: 30px 0; border: none; border-top: 2px solid var(--light);">
                    
                    <h3 style="margin-bottom: 20px;">ìƒˆ ì¢…ëª© ì¶”ê°€</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>ì¢…ëª©ëª… ê²€ìƒ‰</label>
                            <div style="position: relative;">
                                <input type="text" id="stockSearch" placeholder="ì¢…ëª©ëª…ì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ì‚¼ì„±ì „ì)" 
                                    oninput="searchStock(this.value)" autocomplete="off">
                                <div id="stockSearchResults" style="display: none; position: absolute; top: 100%; left: 0; right: 0; 
                                    background: white; border: 2px solid var(--primary); border-radius: 8px; max-height: 200px; 
                                    overflow-y: auto; z-index: 1000; margin-top: 5px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);"></div>
                            </div>
                            <small style="color: var(--gray); font-size: 12px; margin-top: 5px; display: block;">
                                ì¢…ëª©ëª…ì„ ì…ë ¥í•˜ë©´ ìë™ìœ¼ë¡œ ê²€ìƒ‰ë©ë‹ˆë‹¤
                            </small>
                        </div>
                        <div class="form-group">
                            <label>ì¢…ëª©ëª…</label>
                            <input type="text" id="stockName" placeholder="ìë™ ì…ë ¥ ë˜ëŠ” ì§ì ‘ ì…ë ¥">
                        </div>
                        <div class="form-group">
                            <label>ì¢…ëª© ì½”ë“œ</label>
                            <div style="display: flex; gap: 10px;">
                                <input type="text" id="stockCode" placeholder="ìë™ ì…ë ¥ ë˜ëŠ” ì§ì ‘ ì…ë ¥" style="flex: 1;">
                                <button type="button" class="btn-success" onclick="fetchStockPrice()" style="white-space: nowrap;">ğŸ” ê°€ê²© ì¡°íšŒ</button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>í˜„ì¬ê°€</label>
                            <input type="number" id="stockPrice" placeholder="ì§ì ‘ ì…ë ¥ ë˜ëŠ” ìë™ ì¡°íšŒ">
                            <small id="priceUpdateTime" style="color: var(--gray); font-size: 12px; margin-top: 5px; display: block;"></small>
                        </div>
                        <div class="form-group">
                            <label>ëª©í‘œê°€</label>
                            <input type="number" id="targetPrice" placeholder="80000">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>íˆ¬ì ë©”ëª¨</label>
                        <textarea id="stockMemo" placeholder="íˆ¬ì ì´ìœ , ì „ë§ ë“±..."></textarea>
                    </div>
                    <button onclick="addWatchlist()">â• ì¢…ëª© ì¶”ê°€</button>
                </div>
            </div>

            <!-- í¬íŠ¸í´ë¦¬ì˜¤ -->
            <div id="portfolio" class="section">
                <div class="card">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2 style="margin: 0; padding: 0; border: none;">ğŸ’¼ ë³´ìœ  í¬íŠ¸í´ë¦¬ì˜¤</h2>
                        <button class="btn-success btn-sm" onclick="updateAllPrices()">ğŸ”„ ì „ì²´ ê°€ê²© ì—…ë°ì´íŠ¸</button>
                    </div>
                    <div id="portfolioItems"></div>
                    
                    <hr style="margin: 30px 0; border: none; border-top: 2px solid var(--light);">
                    
                    <h3 style="margin-bottom: 20px;">ë³´ìœ  ì¢…ëª© ì¶”ê°€</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>ì¢…ëª©ëª… ê²€ìƒ‰</label>
                            <div style="position: relative;">
                                <input type="text" id="portStockSearch" placeholder="ì¢…ëª©ëª…ì„ ì…ë ¥í•˜ì„¸ìš”" 
                                    oninput="searchPortfolioStock(this.value)" autocomplete="off">
                                <div id="portStockSearchResults" style="display: none; position: absolute; top: 100%; left: 0; right: 0; 
                                    background: white; border: 2px solid var(--primary); border-radius: 8px; max-height: 200px; 
                                    overflow-y: auto; z-index: 1000; margin-top: 5px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);"></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>ì¢…ëª©ëª…</label>
                            <input type="text" id="portStockName" placeholder="ìë™ ì…ë ¥ ë˜ëŠ” ì§ì ‘ ì…ë ¥">
                        </div>
                        <div class="form-group">
                            <label>ì¢…ëª© ì½”ë“œ</label>
                            <input type="text" id="portStockCode" placeholder="ìë™ ì…ë ¥ ë˜ëŠ” ì§ì ‘ ì…ë ¥">
                        </div>
                        <div class="form-group">
                            <label>ìˆ˜ëŸ‰</label>
                            <input type="number" id="portQuantity" placeholder="10">
                        </div>
                        <div class="form-group">
                            <label>í‰ê·  ë§¤ìˆ˜ê°€</label>
                            <input type="number" id="portBuyPrice" placeholder="65000">
                        </div>
                        <div class="form-group">
                            <label>í˜„ì¬ê°€</label>
                            <input type="number" id="portCurrentPrice" placeholder="ì§ì ‘ ì…ë ¥ ë˜ëŠ” ìë™ ì¡°íšŒ">
                            <small id="portPriceUpdateTime" style="color: var(--gray); font-size: 12px; margin-top: 5px; display: block;"></small>
                        </div>
                    </div>
                    <button onclick="addPortfolio()">â• ì¢…ëª© ì¶”ê°€</button>
                </div>
            </div>

            <!-- ë§¤ë§¤ ì¼ì§€ -->
            <div id="trades" class="section">
                <div class="card">
                    <h2>ğŸ“ˆ ë§¤ë§¤ ì¼ì§€</h2>
                    <div id="tradesList"></div>
                    
                    <hr style="margin: 30px 0; border: none; border-top: 2px solid var(--light);">
                    
                    <h3 style="margin-bottom: 20px;">ë§¤ë§¤ ê¸°ë¡ ì¶”ê°€</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>ë§¤ë§¤ ìœ í˜•</label>
                            <select id="tradeType">
                                <option value="buy">ë§¤ìˆ˜</option>
                                <option value="sell">ë§¤ë„</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>ì¢…ëª©ëª…</label>
                            <input type="text" id="tradeName" placeholder="ì‚¼ì„±ì „ì">
                        </div>
                        <div class="form-group">
                            <label>ìˆ˜ëŸ‰</label>
                            <input type="number" id="tradeQuantity" placeholder="10">
                        </div>
                        <div class="form-group">
                            <label>ê°€ê²©</label>
                            <input type="number" id="tradePrice" placeholder="70000">
                        </div>
                        <div class="form-group">
                            <label>ê±°ë˜ì¼</label>
                            <input type="date" id="tradeDate">
                        </div>
                        <div class="form-group">
                            <label>ì „ëµ</label>
                            <input type="text" id="tradeStrategy" placeholder="ì˜ˆ: ë‹¨ê¸° ë§¤ë§¤">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>ë©”ëª¨</label>
                        <textarea id="tradeMemo" placeholder="ë§¤ë§¤ ì´ìœ , ì‹œì¥ ìƒí™© ë“±..."></textarea>
                    </div>
                    <button onclick="addTrade()">â• ê¸°ë¡ ì¶”ê°€</button>
                </div>
            </div>

            <!-- ì¢…ëª© ë¶„ì„ -->
            <div id="analysis" class="section">
                <div class="card">
                    <h2>ğŸ” ì¢…ëª© ë¶„ì„</h2>
                    <div id="analysisItems"></div>
                    
                    <hr style="margin: 30px 0; border: none; border-top: 2px solid var(--light);">
                    
                    <h3 style="margin-bottom: 20px;">ì¢…ëª© ë¶„ì„ ì¶”ê°€</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>ì¢…ëª©ëª…</label>
                            <input type="text" id="analysisName" placeholder="ì‚¼ì„±ì „ì">
                        </div>
                        <div class="form-group">
                            <label>ì„¹í„°</label>
                            <input type="text" id="analysisSector" placeholder="ë°˜ë„ì²´">
                        </div>
                    </div>
                    
                    <h4 style="margin: 20px 0 15px;">ì¬ë¬´ ì§€í‘œ</h4>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>PER</label>
                            <input type="number" step="0.1" id="analysisPer" placeholder="15.5">
                        </div>
                        <div class="form-group">
                            <label>PBR</label>
                            <input type="number" step="0.1" id="analysisPbr" placeholder="1.2">
                        </div>
                        <div class="form-group">
                            <label>ROE (%)</label>
                            <input type="number" step="0.1" id="analysisRoe" placeholder="12.5">
                        </div>
                        <div class="form-group">
                            <label>ë¶€ì±„ë¹„ìœ¨ (%)</label>
                            <input type="number" step="0.1" id="analysisDebt" placeholder="45">
                        </div>
                    </div>
                    
                    <h4 style="margin: 20px 0 15px;">íˆ¬ì ì ìˆ˜ (0-100)</h4>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>ì¬ë¬´ ê±´ì „ì„±</label>
                            <input type="number" min="0" max="100" id="scoreFinancial" placeholder="80">
                        </div>
                        <div class="form-group">
                            <label>ì„±ì¥ì„±</label>
                            <input type="number" min="0" max="100" id="scoreGrowth" placeholder="75">
                        </div>
                        <div class="form-group">
                            <label>ìˆ˜ìµì„±</label>
                            <input type="number" min="0" max="100" id="scoreProfitability" placeholder="85">
                        </div>
                        <div class="form-group">
                            <label>ë°¸ë¥˜ì—ì´ì…˜</label>
                            <input type="number" min="0" max="100" id="scoreValuation" placeholder="70">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>ë¶„ì„ ë‚´ìš©</label>
                        <textarea id="analysisContent" placeholder="ê°•ì , ì•½ì , ì „ë§ ë“±ì„ ì‘ì„±í•˜ì„¸ìš”..."></textarea>
                    </div>
                    <button onclick="addAnalysis()">â• ë¶„ì„ ì¶”ê°€</button>
                </div>
            </div>

            <!-- ì¢…ëª© ìŠ¤í¬ë¦¬ë„ˆ -->
            <div id="screener" class="section">
                <div class="card">
                    <h2>ğŸ¯ AI ì¢…ëª© ìŠ¤í¬ë¦¬ë„ˆ</h2>
                    <p style="color: var(--gray); margin-bottom: 20px;">
                        ì›í•˜ëŠ” ì¡°ê±´ì„ ì…ë ¥í•˜ë©´ AIê°€ ìë™ìœ¼ë¡œ ì¢…ëª©ì„ ì°¾ì•„ë“œë¦½ë‹ˆë‹¤
                    </p>

                    <!-- ê°„ë‹¨ ê²€ìƒ‰ -->
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
                        padding: 30px; border-radius: 15px; margin-bottom: 30px;">
                        <h3 style="color: white; margin-bottom: 15px; font-size: 18px;">ğŸ’¬ ìì—°ì–´ë¡œ ê²€ìƒ‰</h3>
                        <input type="text" id="naturalSearch" placeholder="ì˜ˆ: ìˆ˜ìµë¥  20% ì´ìƒì¸ ê¸°ì—… ì°¾ì•„ì¤˜" 
                            style="width: 100%; padding: 15px; font-size: 16px; border: none; border-radius: 10px;
                            box-shadow: 0 4px 15px rgba(0,0,0,0.1);"
                            onkeypress="if(event.key==='Enter') searchByNaturalLanguage()">
                        <button onclick="searchByNaturalLanguage()" 
                            style="width: 100%; margin-top: 15px; background: white; color: var(--primary); 
                            box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
                            ğŸ” AIë¡œ ì°¾ê¸°
                        </button>
                    </div>

                    <!-- ìƒì„¸ í•„í„° -->
                    <div class="grid grid-2">
                        <div class="card" style="background: var(--light);">
                            <h3 style="margin-bottom: 20px; font-size: 16px;">ğŸ“Š ì‹œì¥ ì„ íƒ</h3>
                            <div class="form-group">
                                <label>ê±°ë˜ì†Œ</label>
                                <select id="marketSelect">
                                    <option value="kospi">ğŸ‡°ğŸ‡· ì½”ìŠ¤í”¼ (KOSPI)</option>
                                    <option value="kosdaq">ğŸ‡°ğŸ‡· ì½”ìŠ¤ë‹¥ (KOSDAQ)</option>
                                    <option value="nasdaq">ğŸ‡ºğŸ‡¸ ë‚˜ìŠ¤ë‹¥ (NASDAQ)</option>
                                    <option value="nyse">ğŸ‡ºğŸ‡¸ ë‰´ìš•ì¦ê¶Œê±°ë˜ì†Œ (NYSE)</option>
                                </select>
                            </div>
                        </div>

                        <div class="card" style="background: var(--light);">
                            <h3 style="margin-bottom: 20px; font-size: 16px;">ğŸ’° ìˆ˜ìµë¥  ì¡°ê±´</h3>
                            <div class="form-group">
                                <label>ìˆ˜ìµë¥  (ìµœì†Œ)</label>
                                <div style="display: flex; gap: 10px; align-items: center;">
                                    <input type="range" id="returnMin" min="-50" max="200" value="0" 
                                        oninput="updateReturnDisplay()" style="flex: 1;">
                                    <span id="returnMinDisplay" style="font-weight: bold; min-width: 60px;">0%</span>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>ê¸°ê°„</label>
                                <select id="returnPeriod">
                                    <option value="1d">1ì¼</option>
                                    <option value="1w">1ì£¼ì¼</option>
                                    <option value="1m">1ê°œì›”</option>
                                    <option value="3m">3ê°œì›”</option>
                                    <option value="6m">6ê°œì›”</option>
                                    <option value="1y" selected>1ë…„</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="grid grid-3" style="margin-top: 20px;">
                        <div class="card" style="background: var(--light);">
                            <h3 style="margin-bottom: 15px; font-size: 16px;">ğŸ“ˆ ë°¸ë¥˜ì—ì´ì…˜</h3>
                            <div class="form-group">
                                <label>PER (ìµœëŒ€)</label>
                                <input type="number" id="perMax" placeholder="ì˜ˆ: 15" step="0.1">
                            </div>
                            <div class="form-group">
                                <label>PBR (ìµœëŒ€)</label>
                                <input type="number" id="pbrMax" placeholder="ì˜ˆ: 2" step="0.1">
                            </div>
                        </div>

                        <div class="card" style="background: var(--light);">
                            <h3 style="margin-bottom: 15px; font-size: 16px;">ğŸ’ª ì¬ë¬´ ê±´ì „ì„±</h3>
                            <div class="form-group">
                                <label>ROE (ìµœì†Œ, %)</label>
                                <input type="number" id="roeMin" placeholder="ì˜ˆ: 10" step="0.1">
                            </div>
                            <div class="form-group">
                                <label>ë¶€ì±„ë¹„ìœ¨ (ìµœëŒ€, %)</label>
                                <input type="number" id="debtMax" placeholder="ì˜ˆ: 100" step="0.1">
                            </div>
                        </div>

                        <div class="card" style="background: var(--light);">
                            <h3 style="margin-bottom: 15px; font-size: 16px;">ğŸ¢ ê¸°ì—… ê·œëª¨</h3>
                            <div class="form-group">
                                <label>ì‹œê°€ì´ì•¡ (ìµœì†Œ)</label>
                                <select id="marketCapMin">
                                    <option value="0">ì œí•œ ì—†ìŒ</option>
                                    <option value="100">100ì–µ ì´ìƒ</option>
                                    <option value="1000">1ì²œì–µ ì´ìƒ</option>
                                    <option value="10000">1ì¡° ì´ìƒ</option>
                                    <option value="100000">10ì¡° ì´ìƒ</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>ê±°ë˜ëŸ‰ (ìµœì†Œ)</label>
                                <select id="volumeMin">
                                    <option value="0">ì œí•œ ì—†ìŒ</option>
                                    <option value="10000">1ë§Œì£¼ ì´ìƒ</option>
                                    <option value="100000">10ë§Œì£¼ ì´ìƒ</option>
                                    <option value="1000000">100ë§Œì£¼ ì´ìƒ</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div style="margin-top: 30px; text-align: center;">
                        <button onclick="screenStocks()" style="padding: 18px 50px; font-size: 18px;">
                            ğŸ¯ ì¡°ê±´ì— ë§ëŠ” ì¢…ëª© ì°¾ê¸°
                        </button>
                    </div>

                    <div id="screenerLoading" style="display: none; text-align: center; padding: 40px;">
                        <div class="spinner"></div>
                        <p style="margin-top: 20px; color: var(--gray);">ì¢…ëª©ì„ ê²€ìƒ‰í•˜ê³  ìˆìŠµë‹ˆë‹¤...</p>
                    </div>

                    <div id="screenerResults" style="margin-top: 30px;"></div>
                </div>

                <!-- í”„ë¦¬ì…‹ -->
                <div class="card">
                    <h2>âš¡ ë¹ ë¥¸ ìŠ¤í¬ë¦¬ë‹ í”„ë¦¬ì…‹</h2>
                    <div class="grid grid-3">
                        <button class="btn-success" onclick="applyPreset('growth')" style="padding: 20px;">
                            <div style="font-size: 24px; margin-bottom: 10px;">ğŸš€</div>
                            <strong>ê³ ì„±ì¥ì£¼</strong>
                            <div style="font-size: 12px; margin-top: 5px; opacity: 0.9;">
                                ìˆ˜ìµë¥  30%â†‘<br>ROE 15%â†‘
                            </div>
                        </button>
                        <button class="btn-primary" onclick="applyPreset('value')" style="padding: 20px;">
                            <div style="font-size: 24px; margin-bottom: 10px;">ğŸ’</div>
                            <strong>ê°€ì¹˜ì£¼</strong>
                            <div style="font-size: 12px; margin-top: 5px; opacity: 0.9;">
                                PER 10â†“<br>PBR 1â†“
                            </div>
                        </button>
                        <button class="btn-warning" onclick="applyPreset('safe')" style="padding: 20px;">
                            <div style="font-size: 24px; margin-bottom: 10px;">ğŸ›¡ï¸</div>
                            <strong>ì•ˆì „ì£¼</strong>
                            <div style="font-size: 12px; margin-top: 5px; opacity: 0.9;">
                                ë¶€ì±„ë¹„ìœ¨ 50%â†“<br>ROE 10%â†‘
                            </div>
                        </button>
                    </div>
                </div>
            </div>

            <!-- ìˆ˜ìµë¥  ë¶„ì„ -->
            <div id="performance" class="section">
                <div class="card">
                    <h2>ğŸ“‰ ìˆ˜ìµë¥  ë¶„ì„</h2>
                    
                    <div class="grid grid-3">
                        <div class="stat-card">
                            <div class="stat-label">ì¼ê°„ ìˆ˜ìµë¥ </div>
                            <div class="stat-value" id="dailyReturn">0%</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">ì£¼ê°„ ìˆ˜ìµë¥ </div>
                            <div class="stat-value" id="weeklyReturn">0%</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">ì›”ê°„ ìˆ˜ìµë¥ </div>
                            <div class="stat-value" id="monthlyReturn">0%</div>
                        </div>
                    </div>

                    <div style="margin-top: 30px;">
                        <h3 style="margin-bottom: 15px;">ë§¤ë§¤ í†µê³„</h3>
                        <div class="grid grid-2">
                            <div>
                                <div class="score-item">
                                    <span class="score-label">ìŠ¹ë¥ </span>
                                    <div class="score-bar">
                                        <div class="score-fill" id="winRateBar"></div>
                                    </div>
                                    <span class="score-value" id="winRate">0%</span>
                                </div>
                                <div class="score-item">
                                    <span class="score-label">í‰ê·  ìˆ˜ìµ</span>
                                    <div class="score-bar">
                                        <div class="score-fill" id="avgProfitBar"></div>
                                    </div>
                                    <span class="score-value" id="avgProfit">0%</span>
                                </div>
                            </div>
                            <div>
                                <div class="item-meta">
                                    <span>ì´ ë§¤ë§¤ íšŸìˆ˜: <strong id="totalTrades">0íšŒ</strong></span>
                                    <span>ìˆ˜ìµ ê±°ë˜: <strong id="winTrades">0íšŒ</strong></span>
                                    <span>ì†ì‹¤ ê±°ë˜: <strong id="lossTrades">0íšŒ</strong></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div style="margin-top: 30px;">
                        <h3 style="margin-bottom: 15px;">ì›”ë³„ ì†ìµ</h3>
                        <div class="chart-container">
                            <canvas id="monthlyChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ëª©í‘œ ê´€ë¦¬ -->
            <div id="goals" class="section">
                <div class="card">
                    <h2>ğŸ† íˆ¬ì ëª©í‘œ</h2>
                    <div id="goalsList"></div>
                    
                    <hr style="margin: 30px 0; border: none; border-top: 2px solid var(--light);">
                    
                    <h3 style="margin-bottom: 20px;">ìƒˆ ëª©í‘œ ì¶”ê°€</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>ëª©í‘œ ë‚´ìš©</label>
                            <input type="text" id="goalTitle" placeholder="ì˜ˆ: 1ì–µ ë§Œë“¤ê¸°">
                        </div>
                        <div class="form-group">
                            <label>ëª©í‘œ ê¸ˆì•¡</label>
                            <input type="number" id="goalTarget" placeholder="100000000">
                        </div>
                        <div class="form-group">
                            <label>í˜„ì¬ ê¸ˆì•¡</label>
                            <input type="number" id="goalCurrent" placeholder="50000000">
                        </div>
                        <div class="form-group">
                            <label>ëª©í‘œì¼</label>
                            <input type="date" id="goalDate">
                        </div>
                    </div>
                    <button onclick="addGoal()">â• ëª©í‘œ ì¶”ê°€</button>
                </div>
            </div>

            <!-- ì„¸ê¸ˆ ê³„ì‚° -->
            <div id="tax" class="section">
                <div class="card">
                    <h2>ğŸ’° ì„¸ê¸ˆ ê³„ì‚°ê¸°</h2>
                    
                    <h3 style="margin-bottom: 15px;">ì–‘ë„ì†Œë“ì„¸ ê³„ì‚°</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>ë§¤ë„ê°€</label>
                            <input type="number" id="sellPrice" placeholder="100000000">
                        </div>
                        <div class="form-group">
                            <label>ë§¤ìˆ˜ê°€</label>
                            <input type="number" id="buyPrice" placeholder="80000000">
                        </div>
                        <div class="form-group">
                            <label>ë³´ìœ  ê¸°ê°„ (ë…„)</label>
                            <input type="number" id="holdingPeriod" placeholder="2">
                        </div>
                    </div>
                    <button onclick="calculateCapitalGainTax()">ğŸ’µ ì–‘ë„ì„¸ ê³„ì‚°</button>
                    <div id="taxResult" style="margin-top: 20px;"></div>

                    <hr style="margin: 30px 0; border: none; border-top: 2px solid var(--light);">

                    <h3 style="margin-bottom: 15px;">ë°°ë‹¹ì†Œë“ì„¸ ê³„ì‚°</h3>
                    <div class="form-grid">
                        <div class="form-group">
                            <label>ë°°ë‹¹ê¸ˆ</label>
                            <input type="number" id="dividend" placeholder="5000000">
                        </div>
                    </div>
                    <button onclick="calculateDividendTax()">ğŸ’µ ë°°ë‹¹ì„¸ ê³„ì‚°</button>
                    <div id="dividendTaxResult" style="margin-top: 20px;"></div>

                    <hr style="margin: 30px 0; border: none; border-top: 2px solid var(--light);">

                    <h3 style="margin-bottom: 15px;">ì—°ê°„ ì†ìµ ì •ì‚°</h3>
                    <div id="yearlyTaxSummary"></div>
                    <button onclick="calculateYearlyTax()">ğŸ“Š ì—°ê°„ ì†ìµ ê³„ì‚°</button>
                </div>
            </div>

            <!-- ë§ˆì¸ë“œ ì»¨íŠ¸ë¡¤ -->
            <div id="mindset" class="section">
                <div class="grid grid-2">
                    <!-- íˆ¬ì ì‹¬ë¦¬ ì²´í¬ -->
                    <div class="card">
                        <h2>ğŸ§  íˆ¬ì ì‹¬ë¦¬ ì²´í¬</h2>
                        <p style="color: var(--gray); margin-bottom: 20px;">í˜„ì¬ ë‚˜ì˜ íˆ¬ì ì‹¬ë¦¬ ìƒíƒœë¥¼ ì ê²€í•˜ì„¸ìš”</p>
                        
                        <div style="margin-bottom: 20px;">
                            <label>ğŸ˜¨ ê³µí¬ ìˆ˜ì¤€ (0-10)</label>
                            <input type="range" id="fearLevel" min="0" max="10" value="5" 
                                oninput="updateMindsetBar('fear', this.value)" style="width: 100%;">
                            <div style="text-align: center; margin-top: 5px;">
                                <strong id="fearValue">5</strong> / 10
                            </div>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <label>ğŸ˜ íƒìš• ìˆ˜ì¤€ (0-10)</label>
                            <input type="range" id="greedLevel" min="0" max="10" value="5" 
                                oninput="updateMindsetBar('greed', this.value)" style="width: 100%;">
                            <div style="text-align: center; margin-top: 5px;">
                                <strong id="greedValue">5</strong> / 10
                            </div>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <label>ğŸ¯ ìì‹ ê° ìˆ˜ì¤€ (0-10)</label>
                            <input type="range" id="confidenceLevel" min="0" max="10" value="5" 
                                oninput="updateMindsetBar('confidence', this.value)" style="width: 100%;">
                            <div style="text-align: center; margin-top: 5px;">
                                <strong id="confidenceValue">5</strong> / 10
                            </div>
                        </div>

                        <div style="margin-bottom: 20px;">
                            <label>ğŸ˜° ìŠ¤íŠ¸ë ˆìŠ¤ ìˆ˜ì¤€ (0-10)</label>
                            <input type="range" id="stressLevel" min="0" max="10" value="5" 
                                oninput="updateMindsetBar('stress', this.value)" style="width: 100%;">
                            <div style="text-align: center; margin-top: 5px;">
                                <strong id="stressValue">5</strong> / 10
                            </div>
                        </div>

                        <div id="mindsetAdvice" style="margin-top: 20px;"></div>
                        <button onclick="saveMindsetCheck()">ğŸ’¾ ì‹¬ë¦¬ ìƒíƒœ ê¸°ë¡</button>
                    </div>

                    <!-- ê°ì • ì¼ê¸° -->
                    <div class="card">
                        <h2>ğŸ“” íˆ¬ì ê°ì • ì¼ê¸°</h2>
                        <div id="emotionDiaryList"></div>
                        
                        <hr style="margin: 20px 0; border: none; border-top: 2px solid var(--light);">
                        
                        <div class="form-group">
                            <label>ì˜¤ëŠ˜ì˜ ê°ì •</label>
                            <select id="emotionType">
                                <option value="happy">ğŸ˜Š ê¸°ì¨ (ìˆ˜ìµ)</option>
                                <option value="sad">ğŸ˜¢ ìŠ¬í”” (ì†ì‹¤)</option>
                                <option value="anxious">ğŸ˜° ë¶ˆì•ˆ (ë³€ë™ì„±)</option>
                                <option value="regret">ğŸ˜” í›„íšŒ (ê¸°íšŒ ìƒì‹¤)</option>
                                <option value="confident">ğŸ˜ ìì‹ ê° (í™•ì‹ )</option>
                                <option value="confused">ğŸ˜• í˜¼ë€ (ë§ì„¤ì„)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>ê°ì • ì¼ê¸°</label>
                            <textarea id="emotionContent" placeholder="ì˜¤ëŠ˜ íˆ¬ìí•˜ë©´ì„œ ëŠë‚€ ê°ì •, ìƒê°, ê³ ë¯¼ ë“±ì„ ì†”ì§í•˜ê²Œ ì ì–´ë³´ì„¸ìš”..."></textarea>
                        </div>
                        <button onclick="addEmotionDiary()">âœï¸ ì¼ê¸° ì“°ê¸°</button>
                    </div>
                </div>

                <div class="grid grid-2">
                    <!-- ì‹¤ìˆ˜ ë…¸íŠ¸ -->
                    <div class="card">
                        <h2>âš ï¸ íˆ¬ì ì‹¤ìˆ˜ ë…¸íŠ¸</h2>
                        <p style="color: var(--gray); margin-bottom: 20px;">ê°™ì€ ì‹¤ìˆ˜ë¥¼ ë°˜ë³µí•˜ì§€ ì•Šê¸° ìœ„í•œ ê¸°ë¡</p>
                        <div id="mistakesList"></div>
                        
                        <hr style="margin: 20px 0; border: none; border-top: 2px solid var(--light);">
                        
                        <div class="form-group">
                            <label>ì‹¤ìˆ˜ ìœ í˜•</label>
                            <select id="mistakeType">
                                <option value="emotional">ê°ì •ì  ë§¤ë§¤</option>
                                <option value="noplan">ê³„íš ì—†ëŠ” ë§¤ë§¤</option>
                                <option value="overleveraged">ê³¼ë„í•œ ë ˆë²„ë¦¬ì§€</option>
                                <option value="fomo">FOMO (ë†“ì¹ ê¹Œë´ ë‘ë ¤ì›€)</option>
                                <option value="cutloss">ì†ì ˆ ì‹¤íŒ¨</option>
                                <option value="overtrading">ê³¼ë„í•œ ë§¤ë§¤</option>
                                <option value="other">ê¸°íƒ€</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>ì‹¤ìˆ˜ ë‚´ìš©</label>
                            <textarea id="mistakeContent" placeholder="ì–´ë–¤ ì‹¤ìˆ˜ë¥¼ í–ˆë‚˜ìš”?"></textarea>
                        </div>
                        <div class="form-group">
                            <label>ë°°ìš´ ì  & ì¬ë°œ ë°©ì§€ì±…</label>
                            <textarea id="mistakeLesson" placeholder="ì´ ì‹¤ìˆ˜ë¡œë¶€í„° ë¬´ì—‡ì„ ë°°ì› ê³ , ì•ìœ¼ë¡œ ì–´ë–»ê²Œ ë°©ì§€í•  ê²ƒì¸ê°€?"></textarea>
                        </div>
                        <button onclick="addMistake()">ğŸ“ ì‹¤ìˆ˜ ê¸°ë¡</button>
                    </div>

                    <!-- ì„±ê³µ ì‚¬ë¡€ -->
                    <div class="card">
                        <h2>ğŸ† íˆ¬ì ì„±ê³µ ì‚¬ë¡€</h2>
                        <p style="color: var(--gray); margin-bottom: 20px;">ì˜í•œ íˆ¬ì ê²°ì •ì„ ê¸°ë¡í•˜ê³  ë°˜ë³µí•˜ì„¸ìš”</p>
                        <div id="successList"></div>
                        
                        <hr style="margin: 20px 0; border: none; border-top: 2px solid var(--light);">
                        
                        <div class="form-group">
                            <label>ì„±ê³µ ìœ í˜•</label>
                            <select id="successType">
                                <option value="patience">ì¸ë‚´ì‹¬ ë°œíœ˜</option>
                                <option value="discipline">ì›ì¹™ ì¤€ìˆ˜</option>
                                <option value="research">ì² ì €í•œ ë¶„ì„</option>
                                <option value="timing">ì ì ˆí•œ íƒ€ì´ë°</option>
                                <option value="cutloss">ë¹ ë¥¸ ì†ì ˆ</option>
                                <option value="other">ê¸°íƒ€</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>ì„±ê³µ ë‚´ìš©</label>
                            <textarea id="successContent" placeholder="ë¬´ì—‡ì„ ì˜í–ˆë‚˜ìš”?"></textarea>
                        </div>
                        <div class="form-group">
                            <label>ì„±ê³µ ìš”ì¸ & ë°˜ë³µ ì „ëµ</label>
                            <textarea id="successReason" placeholder="ì™œ ì„±ê³µí–ˆê³ , ì–´ë–»ê²Œ ë°˜ë³µí•  ê²ƒì¸ê°€?"></textarea>
                        </div>
                        <button onclick="addSuccess()">ğŸŒŸ ì„±ê³µ ê¸°ë¡</button>
                    </div>
                </div>

                <!-- ëª…ì–¸ & ê²©ë ¤ -->
                <div class="card">
                    <h2>ğŸ’¬ íˆ¬ì ëª…ì–¸ & ë‚˜ì—ê²Œ í•˜ëŠ” ë§</h2>
                    <div id="quotesList"></div>
                    
                    <hr style="margin: 20px 0; border: none; border-top: 2px solid var(--light);">
                    
                    <div class="form-group">
                        <label>ëª…ì–¸ / ê²©ë ¤ ë¬¸êµ¬</label>
                        <textarea id="quoteContent" placeholder="íˆ¬ìí•  ë•Œ ë– ì˜¬ë¦¬ê³  ì‹¶ì€ ëª…ì–¸, ë‚˜ ìì‹ ì—ê²Œ í•˜ëŠ” ê²©ë ¤, ë‹¤ì§ ë“±..."></textarea>
                    </div>
                    <button onclick="addQuote()">ğŸ’­ ì¶”ê°€</button>
                </div>

                <!-- ì‹¬ë¦¬ í†µê³„ -->
                <div class="card">
                    <h2>ğŸ“Š ì‹¬ë¦¬ ìƒíƒœ ì¶”ì´</h2>
                    <div class="chart-container">
                        <canvas id="mindsetChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- ê³„ì • ê´€ë¦¬ -->
            <div id="account" class="section">
                <div class="grid grid-2">
                    <!-- ê³„ì • ì •ë³´ -->
                    <div class="card">
                        <h2>ğŸ‘¤ ê³„ì • ì •ë³´</h2>
                        <div style="background: var(--light); padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                                <div style="width: 60px; height: 60px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
                                    border-radius: 50%; display: flex; align-items: center; justify-content: center; 
                                    font-size: 28px; color: white;">
                                    ğŸ‘¤
                                </div>
                                <div>
                                    <div style="font-size: 20px; font-weight: bold; color: var(--dark);" id="accountUsername"></div>
                                    <div style="font-size: 13px; color: var(--gray); margin-top: 3px;">íˆ¬ì ê´€ë¦¬ ì‹œìŠ¤í…œ ì‚¬ìš©ì</div>
                                </div>
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-top: 15px;">
                                <div style="text-align: center; padding: 12px; background: white; border-radius: 8px;">
                                    <div style="font-size: 11px; color: var(--gray);">ê°€ì…ì¼</div>
                                    <div style="font-weight: bold; font-size: 13px;" id="accountCreated"></div>
                                </div>
                                <div style="text-align: center; padding: 12px; background: white; border-radius: 8px;">
                                    <div style="font-size: 11px; color: var(--gray);">ë§ˆì§€ë§‰ ì ‘ì†</div>
                                    <div style="font-weight: bold; font-size: 13px;" id="accountLastLogin">ë°©ê¸ˆ ì „</div>
                                </div>
                            </div>
                        </div>

                        <h3 style="margin: 20px 0 15px; font-size: 16px;">ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</h3>
                        <div class="form-group">
                            <label>í˜„ì¬ ë¹„ë°€ë²ˆí˜¸</label>
                            <input type="password" id="currentPassword" placeholder="í˜„ì¬ ë¹„ë°€ë²ˆí˜¸">
                        </div>
                        <div class="form-group">
                            <label>ìƒˆ ë¹„ë°€ë²ˆí˜¸</label>
                            <input type="password" id="newPassword" placeholder="ìƒˆ ë¹„ë°€ë²ˆí˜¸ (6ì ì´ìƒ)">
                        </div>
                        <div class="form-group">
                            <label>ìƒˆ ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
                            <input type="password" id="newPasswordConfirm" placeholder="ìƒˆ ë¹„ë°€ë²ˆí˜¸ í™•ì¸">
                        </div>
                        <button onclick="changePassword()">ğŸ”’ ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</button>
                        <div id="passwordChangeResult" style="margin-top: 10px;"></div>
                    </div>

                    <!-- ë°ì´í„° ê´€ë¦¬ -->
                    <div class="card">
                        <h2>ğŸ’¾ ë°ì´í„° ê´€ë¦¬</h2>
                        
                        <div style="background: #d1fae5; padding: 15px; border-radius: 10px; margin-bottom: 20px;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <div style="font-weight: bold; color: var(--dark); margin-bottom: 5px;">
                                        ì´ ë°ì´í„° í•­ëª©
                                    </div>
                                    <div style="font-size: 24px; font-weight: bold; color: var(--success);" id="totalDataCount">0ê°œ</div>
                                </div>
                                <div style="font-size: 48px;">ğŸ“Š</div>
                            </div>
                        </div>

                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 20px;">
                            <div style="text-align: center; padding: 12px; background: var(--light); border-radius: 8px;">
                                <div style="font-size: 11px; color: var(--gray);">íˆ¬ì ì›ì¹™</div>
                                <div style="font-weight: bold; font-size: 16px;" id="principlesCount">0</div>
                            </div>
                            <div style="text-align: center; padding: 12px; background: var(--light); border-radius: 8px;">
                                <div style="font-size: 11px; color: var(--gray);">ê´€ì‹¬ ì¢…ëª©</div>
                                <div style="font-weight: bold; font-size: 16px;" id="watchlistCount">0</div>
                            </div>
                            <div style="text-align: center; padding: 12px; background: var(--light); border-radius: 8px;">
                                <div style="font-size: 11px; color: var(--gray);">í¬íŠ¸í´ë¦¬ì˜¤</div>
                                <div style="font-weight: bold; font-size: 16px;" id="portfolioCount">0</div>
                            </div>
                            <div style="text-align: center; padding: 12px; background: var(--light); border-radius: 8px;">
                                <div style="font-size: 11px; color: var(--gray);">ë§¤ë§¤ ê¸°ë¡</div>
                                <div style="font-weight: bold; font-size: 16px;" id="tradesCount">0</div>
                            </div>
                            <div style="text-align: center; padding: 12px; background: var(--light); border-radius: 8px;">
                                <div style="font-size: 11px; color: var(--gray);">ì¢…ëª© ë¶„ì„</div>
                                <div style="font-weight: bold; font-size: 16px;" id="analysisCount">0</div>
                            </div>
                            <div style="text-align: center; padding: 12px; background: var(--light); border-radius: 8px;">
                                <div style="font-size: 11px; color: var(--gray);">ê°ì • ì¼ê¸°</div>
                                <div style="font-weight: bold; font-size: 16px;" id="emotionCount">0</div>
                            </div>
                        </div>

                        <h3 style="margin: 20px 0 15px; font-size: 16px;">ë°ì´í„° ë°±ì—… & ë³µì›</h3>
                        <div class="btn-group">
                            <button class="btn-success" onclick="exportUserData()">
                                ğŸ“¥ ë°ì´í„° ë‚´ë³´ë‚´ê¸° (ë°±ì—…)
                            </button>
                            <button class="btn-primary" onclick="document.getElementById('importUserFile').click()">
                                ğŸ“¤ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° (ë³µì›)
                            </button>
                            <input type="file" id="importUserFile" style="display: none" accept=".json" onchange="importUserData(event)">
                        </div>

                        <h3 style="margin: 20px 0 15px; font-size: 16px;">âš ï¸ ìœ„í—˜ êµ¬ì—­</h3>
                        <div style="background: #fee2e2; padding: 15px; border-radius: 10px; border-left: 4px solid var(--danger);">
                            <p style="color: #991b1b; font-size: 14px; margin-bottom: 10px;">
                                ì•„ë˜ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì‹ ì¤‘í•˜ê²Œ ì„ íƒí•˜ì„¸ìš”.
                            </p>
                            <div class="btn-group">
                                <button class="btn-warning" onclick="clearAllData()">
                                    ğŸ—‘ï¸ ëª¨ë“  ë°ì´í„° ì‚­ì œ
                                </button>
                                <button class="btn-danger" onclick="deleteAccount()">
                                    âŒ ê³„ì • ì‚­ì œ
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- í†µê³„ -->
                <div class="card">
                    <h2>ğŸ“Š í™œë™ í†µê³„</h2>
                    <div class="grid grid-4">
                        <div class="stat-card">
                            <div class="stat-label">ì´ íˆ¬ì ì›ì¹™</div>
                            <div class="stat-value" id="statPrinciples">0ê°œ</div>
                            <div class="stat-change">íˆ¬ì ì² í•™</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">ì´ ë§¤ë§¤ íšŸìˆ˜</div>
                            <div class="stat-value" id="statTrades">0íšŒ</div>
                            <div class="stat-change">ê±°ë˜ í™œë™</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">ì‘ì„±í•œ ì¼ê¸°</div>
                            <div class="stat-value" id="statDiary">0ê°œ</div>
                            <div class="stat-change">ê°ì • ê¸°ë¡</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">ë¶„ì„í•œ ì¢…ëª©</div>
                            <div class="stat-value" id="statAnalysis">0ê°œ</div>
                            <div class="stat-change">ë¦¬ì„œì¹˜</div>
                        </div>
                    </div>
                </div>

                <!-- í™˜ê²½ ì„¤ì • -->
                <div class="card">
                    <h2>âš™ï¸ í™˜ê²½ ì„¤ì •</h2>
                    <div class="grid grid-2">
                        <div>
                            <h3 style="margin-bottom: 15px; font-size: 16px;">ì•Œë¦¼ ì„¤ì •</h3>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; 
                                background: var(--light); border-radius: 8px; margin-bottom: 10px;">
                                <span>ëª©í‘œ ë‹¬ì„± ì•Œë¦¼</span>
                                <input type="checkbox" id="notifyGoals" checked style="width: 20px; height: 20px; cursor: pointer;">
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; 
                                background: var(--light); border-radius: 8px; margin-bottom: 10px;">
                                <span>ì‹¬ë¦¬ ì²´í¬ ì•Œë¦¼</span>
                                <input type="checkbox" id="notifyMindset" checked style="width: 20px; height: 20px; cursor: pointer;">
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center; padding: 12px; 
                                background: var(--light); border-radius: 8px;">
                                <span>ë°ì´í„° ë°±ì—… ì•Œë¦¼</span>
                                <input type="checkbox" id="notifyBackup" checked style="width: 20px; height: 20px; cursor: pointer;">
                            </div>
                        </div>

                        <div>
                            <h3 style="margin-bottom: 15px; font-size: 16px;">í‘œì‹œ ì„¤ì •</h3>
                            <div class="form-group">
                                <label>ì°¨íŠ¸ ê¸°ë³¸ ê¸°ê°„</label>
                                <select id="chartPeriod">
                                    <option value="1m">1ê°œì›”</option>
                                    <option value="3m">3ê°œì›”</option>
                                    <option value="6m" selected>6ê°œì›”</option>
                                    <option value="1y">1ë…„</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>í†µí™” í‘œì‹œ</label>
                                <select id="currency">
                                    <option value="KRW" selected>ì›í™” (KRW)</option>
                                    <option value="USD">ë‹¬ëŸ¬ (USD)</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <button onclick="saveSettings()">ğŸ’¾ ì„¤ì • ì €ì¥</button>
                    <div id="settingsResult" style="margin-top: 10px;"></div>
                </div>
            </div>

            <!-- ê³„ì • ê´€ë¦¬ -->
            <div id="account" class="section">
                <div class="grid grid-2">
                    <!-- ê³„ì • ì •ë³´ -->
                    <div class="card">
                        <h2>ğŸ‘¤ ê³„ì • ì •ë³´</h2>
                        <div style="background: var(--light); padding: 20px; border-radius: 12px; margin-bottom: 20px;">
                            <div style="text-align: center; margin-bottom: 15px;">
                                <div style="width: 80px; height: 80px; margin: 0 auto; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
                                    border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 40px;">
                                    ğŸ‘¤
                                </div>
                            </div>
                            <div style="text-align: center;">
                                <h3 id="accountUsername" style="font-size: 24px; margin-bottom: 5px;">-</h3>
                                <p id="accountCreatedAt" style="color: var(--gray); font-size: 13px;">ê°€ì…ì¼: -</p>
                            </div>
                        </div>

                        <div style="background: white; padding: 15px; border-radius: 8px; border: 2px solid var(--border);">
                            <h4 style="margin-bottom: 15px; font-size: 14px;">ğŸ“Š í™œë™ í†µê³„</h4>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                                <div style="text-align: center; padding: 12px; background: var(--light); border-radius: 8px;">
                                    <div style="font-size: 11px; color: var(--gray);">íˆ¬ì ì›ì¹™</div>
                                    <div style="font-weight: bold; font-size: 16px;" id="principlesCount">0</div>
                                </div>
                                <div style="text-align: center; padding: 12px; background: var(--light); border-radius: 8px;">
                                    <div style="font-size: 11px; color: var(--gray);">ê´€ì‹¬ ì¢…ëª©</div>
                                    <div style="font-weight: bold; font-size: 16px;" id="watchlistCount">0</div>
                                </div>
                                <div style="text-align: center; padding: 12px; background: var(--light); border-radius: 8px;">
                                    <div style="font-size: 11px; color: var(--gray);">í¬íŠ¸í´ë¦¬ì˜¤</div>
                                    <div style="font-weight: bold; font-size: 16px;" id="portfolioCount">0</div>
                                </div>
                                <div style="text-align: center; padding: 12px; background: var(--light); border-radius: 8px;">
                                    <div style="font-size: 11px; color: var(--gray);">ë§¤ë§¤ ê¸°ë¡</div>
                                    <div style="font-weight: bold; font-size: 16px;" id="tradesCount">0</div>
                                </div>
                                <div style="text-align: center; padding: 12px; background: var(--light); border-radius: 8px;">
                                    <div style="font-size: 11px; color: var(--gray);">ì¢…ëª© ë¶„ì„</div>
                                    <div style="font-weight: bold; font-size: 16px;" id="analysisCount">0</div>
                                </div>
                                <div style="text-align: center; padding: 12px; background: var(--light); border-radius: 8px;">
                                    <div style="font-size: 11px; color: var(--gray);">íˆ¬ì ëª©í‘œ</div>
                                    <div style="font-weight: bold; font-size: 16px;" id="goalsCount">0</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ -->
                    <div class="card">
                        <h2>ğŸ” ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</h2>
                        <div class="form-group">
                            <label>í˜„ì¬ ë¹„ë°€ë²ˆí˜¸</label>
                            <input type="password" id="currentPassword" placeholder="í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
                        </div>
                        <div class="form-group">
                            <label>ìƒˆ ë¹„ë°€ë²ˆí˜¸</label>
                            <input type="password" id="newPassword" placeholder="ìƒˆ ë¹„ë°€ë²ˆí˜¸ (6ì ì´ìƒ)">
                        </div>
                        <div class="form-group">
                            <label>ìƒˆ ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
                            <input type="password" id="newPasswordConfirm" placeholder="ìƒˆ ë¹„ë°€ë²ˆí˜¸ ë‹¤ì‹œ ì…ë ¥">
                        </div>
                        <div id="passwordChangeResult" style="margin-bottom: 15px;"></div>
                        <button onclick="changePassword()">ğŸ”„ ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</button>
                    </div>
                </div>

                <!-- ë°ì´í„° ê´€ë¦¬ -->
                <div class="card">
                    <h2>ğŸ’¾ ë°ì´í„° ê´€ë¦¬</h2>
                    <div class="grid grid-3">
                        <div style="text-align: center; padding: 25px; background: var(--light); border-radius: 12px;">
                            <div style="font-size: 48px; margin-bottom: 10px;">ğŸ“¥</div>
                            <h4 style="margin-bottom: 10px;">ë°ì´í„° ë‚´ë³´ë‚´ê¸°</h4>
                            <p style="color: var(--gray); font-size: 13px; margin-bottom: 15px;">
                                ëª¨ë“  íˆ¬ì ë°ì´í„°ë¥¼ JSON íŒŒì¼ë¡œ ë°±ì—…
                            </p>
                            <button onclick="exportData()" class="btn-success">ë‚´ë³´ë‚´ê¸°</button>
                        </div>

                        <div style="text-align: center; padding: 25px; background: var(--light); border-radius: 12px;">
                            <div style="font-size: 48px; margin-bottom: 10px;">ğŸ“¤</div>
                            <h4 style="margin-bottom: 10px;">ë°ì´í„° ê°€ì ¸ì˜¤ê¸°</h4>
                            <p style="color: var(--gray); font-size: 13px; margin-bottom: 15px;">
                                ë°±ì—…í•œ JSON íŒŒì¼ì—ì„œ ë°ì´í„° ë³µì›
                            </p>
                            <button onclick="document.getElementById('importFileAccount').click()" class="btn-primary">
                                ê°€ì ¸ì˜¤ê¸°
                            </button>
                            <input type="file" id="importFileAccount" style="display: none" accept=".json" onchange="importData(event)">
                        </div>

                        <div style="text-align: center; padding: 25px; background: var(--light); border-radius: 12px;">
                            <div style="font-size: 48px; margin-bottom: 10px;">ğŸ—‘ï¸</div>
                            <h4 style="margin-bottom: 10px;">ë°ì´í„° ì´ˆê¸°í™”</h4>
                            <p style="color: var(--gray); font-size: 13px; margin-bottom: 15px;">
                                ëª¨ë“  íˆ¬ì ë°ì´í„°ë¥¼ ì‚­ì œ (ê³„ì •ì€ ìœ ì§€)
                            </p>
                            <button onclick="clearAllData()" class="btn-danger">ì „ì²´ ì‚­ì œ</button>
                        </div>
                    </div>
                </div>

                <!-- ê³„ì • ì‚­ì œ -->
                <div class="card" style="border: 2px solid var(--danger);">
                    <h2 style="color: var(--danger);">âš ï¸ ìœ„í—˜ êµ¬ì—­</h2>
                    <div style="background: #fee2e2; padding: 20px; border-radius: 12px; margin-bottom: 20px;">
                        <h4 style="color: var(--danger); margin-bottom: 10px;">ê³„ì • ì‚­ì œ</h4>
                        <p style="color: #991b1b; font-size: 14px; line-height: 1.6; margin-bottom: 15px;">
                            ê³„ì •ì„ ì‚­ì œí•˜ë©´ <strong>ëª¨ë“  íˆ¬ì ë°ì´í„°ê°€ ì˜êµ¬ì ìœ¼ë¡œ ì‚­ì œ</strong>ë˜ë©° ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
                            <br>ì‹ ì¤‘í•˜ê²Œ ê²°ì •í•˜ì„¸ìš”.
                        </p>
                        <div class="form-group">
                            <label style="color: var(--danger);">ì‚­ì œ í™•ì¸ (DELETE ì…ë ¥)</label>
                            <input type="text" id="deleteConfirm" placeholder="DELETEë¥¼ ì •í™•íˆ ì…ë ¥í•˜ì„¸ìš”" 
                                style="border-color: var(--danger);">
                        </div>
                        <button onclick="deleteAccount()" class="btn-danger" style="width: 100%;">
                            ğŸ—‘ï¸ ê³„ì • ì˜êµ¬ ì‚­ì œ
                        </button>
                    </div>
                </div>

                <!-- ì‚¬ìš© í†µê³„ -->
                <div class="card">
                    <h2>ğŸ“Š ì‚¬ìš© í†µê³„</h2>
                    <div id="usageStats"></div>
                </div>
            </div>
        </main>
    </div>

    <!-- ë¡œê·¸ì¸ ëª¨ë‹¬ -->
    <div id="loginModal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; 
        background: rgba(0,0,0,0.7); z-index: 9999; align-items: center; justify-content: center;">
        <div style="background: white; border-radius: 20px; padding: 40px; max-width: 400px; width: 90%; 
            box-shadow: 0 10px 40px rgba(0,0,0,0.3); animation: slideUp 0.3s ease;">
            <h2 style="text-align: center; margin-bottom: 10px; color: var(--dark);">ğŸ” íˆ¬ì ê´€ë¦¬ ì‹œìŠ¤í…œ</h2>
            <p style="text-align: center; color: var(--gray); margin-bottom: 30px; font-size: 14px;">
                ë¡œê·¸ì¸í•˜ì—¬ ì•ˆì „í•˜ê²Œ ë°ì´í„°ë¥¼ ê´€ë¦¬í•˜ì„¸ìš”
            </p>
            
            <div id="loginForm">
                <div class="form-group">
                    <label>ì‚¬ìš©ì ì´ë¦„</label>
                    <input type="text" id="loginUsername" placeholder="ì•„ì´ë””ë¥¼ ì…ë ¥í•˜ì„¸ìš”" 
                        style="width: 100%; padding: 12px; border: 2px solid var(--border); border-radius: 8px;">
                </div>
                <div class="form-group">
                    <label>ë¹„ë°€ë²ˆí˜¸</label>
                    <input type="password" id="loginPassword" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”" 
                        style="width: 100%; padding: 12px; border: 2px solid var(--border); border-radius: 8px;"
                        onkeypress="if(event.key==='Enter') login()">
                </div>
                <div id="loginError" style="display: none; padding: 10px; background: #fee2e2; color: var(--danger); 
                    border-radius: 8px; margin-bottom: 15px; font-size: 14px;"></div>
                <button onclick="login()" style="width: 100%; padding: 15px; font-size: 16px; margin-bottom: 10px;">
                    ğŸ”“ ë¡œê·¸ì¸
                </button>
                <button onclick="showRegister()" class="btn-secondary" style="width: 100%; padding: 15px; font-size: 16px;">
                    âœï¸ íšŒì›ê°€ì…
                </button>
            </div>

            <div id="registerForm" style="display: none;">
                <div class="form-group">
                    <label>ì‚¬ìš©ì ì´ë¦„</label>
                    <input type="text" id="registerUsername" placeholder="ì•„ì´ë”” (4-20ì)" 
                        style="width: 100%; padding: 12px; border: 2px solid var(--border); border-radius: 8px;">
                </div>
                <div class="form-group">
                    <label>ë¹„ë°€ë²ˆí˜¸</label>
                    <input type="password" id="registerPassword" placeholder="ë¹„ë°€ë²ˆí˜¸ (6ì ì´ìƒ)" 
                        style="width: 100%; padding: 12px; border: 2px solid var(--border); border-radius: 8px;">
                </div>
                <div class="form-group">
                    <label>ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
                    <input type="password" id="registerPasswordConfirm" placeholder="ë¹„ë°€ë²ˆí˜¸ ë‹¤ì‹œ ì…ë ¥" 
                        style="width: 100%; padding: 12px; border: 2px solid var(--border); border-radius: 8px;"
                        onkeypress="if(event.key==='Enter') register()">
                </div>
                <div id="registerError" style="display: none; padding: 10px; background: #fee2e2; color: var(--danger); 
                    border-radius: 8px; margin-bottom: 15px; font-size: 14px;"></div>
                <button onclick="register()" style="width: 100%; padding: 15px; font-size: 16px; margin-bottom: 10px;">
                    âœ… ê°€ì… ì™„ë£Œ
                </button>
                <button onclick="showLogin()" class="btn-secondary" style="width: 100%; padding: 15px; font-size: 16px;">
                    â† ë¡œê·¸ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°
                </button>
            </div>
        </div>
    </div>

    <script>
        // ë°ì´í„° ì €ì¥ì†Œ
        let appData = {
            principles: [],
            watchlist: [],
            portfolio: [],
            trades: [],
            analysis: [],
            goals: [],
            memos: [],
            mindsetChecks: [],
            emotionDiary: [],
            mistakes: [],
            successes: [],
            quotes: []
        };

        let portfolioChart = null;
        let monthlyChart = null;
        let mindsetChart = null;

        // í˜„ì¬ ë¡œê·¸ì¸í•œ ì‚¬ìš©ì
        let currentUser = null;

        // =================
        // ë¡œê·¸ì¸ ì‹œìŠ¤í…œ
        // =================
        
        // ì‚¬ìš©ì ë°ì´í„° êµ¬ì¡°
        function getUsersData() {
            const data = localStorage.getItem('investmentUsers');
            return data ? JSON.parse(data) : {};
        }

        function saveUsersData(users) {
            localStorage.setItem('investmentUsers', JSON.stringify(users));
        }

        // ë¡œê·¸ì¸ ì²´í¬
        function checkLogin() {
            const savedUser = sessionStorage.getItem('currentUser');
            if (savedUser) {
                currentUser = savedUser;
                document.getElementById('currentUser').textContent = `ğŸ‘¤ ${currentUser}`;
                hideLoginModal();
                loadUserData();
            } else {
                showLoginModal();
            }
        }

        // ë¡œê·¸ì¸ ëª¨ë‹¬ í‘œì‹œ/ìˆ¨ê¹€
        function showLoginModal() {
            document.getElementById('loginModal').style.display = 'flex';
            document.getElementById('loginUsername').focus();
        }

        function hideLoginModal() {
            document.getElementById('loginModal').style.display = 'none';
        }

        // ë¡œê·¸ì¸
        function login() {
            const username = document.getElementById('loginUsername').value.trim();
            const password = document.getElementById('loginPassword').value;
            const errorDiv = document.getElementById('loginError');

            if (!username || !password) {
                errorDiv.textContent = 'ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”.';
                errorDiv.style.display = 'block';
                return;
            }

            const users = getUsersData();
            
            if (!users[username]) {
                errorDiv.textContent = 'ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì‚¬ìš©ìì…ë‹ˆë‹¤.';
                errorDiv.style.display = 'block';
                return;
            }

            if (users[username].password !== password) {
                errorDiv.textContent = 'ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.';
                errorDiv.style.display = 'block';
                return;
            }

            // ë¡œê·¸ì¸ ì„±ê³µ
            currentUser = username;
            sessionStorage.setItem('currentUser', username);
            document.getElementById('currentUser').textContent = `ğŸ‘¤ ${currentUser}`;
            
            // í¼ ì´ˆê¸°í™”
            document.getElementById('loginUsername').value = '';
            document.getElementById('loginPassword').value = '';
            errorDiv.style.display = 'none';
            
            hideLoginModal();
            loadUserData();
            
            // í™˜ì˜ ë©”ì‹œì§€
            setTimeout(() => {
                alert(`í™˜ì˜í•©ë‹ˆë‹¤, ${currentUser}ë‹˜! ğŸ‘‹`);
            }, 300);
        }

        // íšŒì›ê°€ì… í™”ë©´ ì „í™˜
        function showRegister() {
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('registerForm').style.display = 'block';
            document.getElementById('registerUsername').focus();
        }

        function showLogin() {
            document.getElementById('registerForm').style.display = 'none';
            document.getElementById('loginForm').style.display = 'block';
            document.getElementById('loginUsername').focus();
        }

        // íšŒì›ê°€ì…
        function register() {
            const username = document.getElementById('registerUsername').value.trim();
            const password = document.getElementById('registerPassword').value;
            const passwordConfirm = document.getElementById('registerPasswordConfirm').value;
            const errorDiv = document.getElementById('registerError');

            // ìœ íš¨ì„± ê²€ì‚¬
            if (!username || !password || !passwordConfirm) {
                errorDiv.textContent = 'ëª¨ë“  í•­ëª©ì„ ì…ë ¥í•˜ì„¸ìš”.';
                errorDiv.style.display = 'block';
                return;
            }

            if (username.length < 4 || username.length > 20) {
                errorDiv.textContent = 'ì•„ì´ë””ëŠ” 4-20ì ì‚¬ì´ì—¬ì•¼ í•©ë‹ˆë‹¤.';
                errorDiv.style.display = 'block';
                return;
            }

            if (password.length < 6) {
                errorDiv.textContent = 'ë¹„ë°€ë²ˆí˜¸ëŠ” 6ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.';
                errorDiv.style.display = 'block';
                return;
            }

            if (password !== passwordConfirm) {
                errorDiv.textContent = 'ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.';
                errorDiv.style.display = 'block';
                return;
            }

            const users = getUsersData();

            if (users[username]) {
                errorDiv.textContent = 'ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì‚¬ìš©ìì…ë‹ˆë‹¤.';
                errorDiv.style.display = 'block';
                return;
            }

            // ì‚¬ìš©ì ìƒì„±
            users[username] = {
                password: password,
                createdAt: new Date().toISOString()
            };

            saveUsersData(users);

            // ìë™ ë¡œê·¸ì¸
            currentUser = username;
            sessionStorage.setItem('currentUser', username);
            document.getElementById('currentUser').textContent = `ğŸ‘¤ ${currentUser}`;

            // í¼ ì´ˆê¸°í™”
            document.getElementById('registerUsername').value = '';
            document.getElementById('registerPassword').value = '';
            document.getElementById('registerPasswordConfirm').value = '';
            errorDiv.style.display = 'none';

            hideLoginModal();
            
            // ìƒˆ ì‚¬ìš©ìì´ë¯€ë¡œ ë¹ˆ ë°ì´í„°ë¡œ ì‹œì‘
            appData = {
                principles: [],
                watchlist: [],
                portfolio: [],
                trades: [],
                analysis: [],
                goals: [],
                memos: [],
                mindsetChecks: [],
                emotionDiary: [],
                mistakes: [],
                successes: [],
                quotes: []
            };
            saveUserData();
            renderAll();

            alert(`íšŒì›ê°€ì… ì™„ë£Œ! í™˜ì˜í•©ë‹ˆë‹¤, ${currentUser}ë‹˜! ğŸ‰`);
        }

        // ë¡œê·¸ì•„ì›ƒ
        function logout() {
            if (!confirm('ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
            
            currentUser = null;
            sessionStorage.removeItem('currentUser');
            document.getElementById('currentUser').textContent = '';
            
            // ë°ì´í„° ì´ˆê¸°í™”
            appData = {
                principles: [],
                watchlist: [],
                portfolio: [],
                trades: [],
                analysis: [],
                goals: [],
                memos: [],
                mindsetChecks: [],
                emotionDiary: [],
                mistakes: [],
                successes: [],
                quotes: []
            };
            renderAll();
            
            showLoginModal();
        }

        // ì‚¬ìš©ìë³„ ë°ì´í„° ë¡œë“œ
        function loadUserData() {
            if (!currentUser) return;
            
            const userDataKey = `investmentData_${currentUser}`;
            const saved = localStorage.getItem(userDataKey);
            
            if (saved) {
                appData = JSON.parse(saved);
            } else {
                // ì²« ë¡œê·¸ì¸ ì‹œ ì˜ˆì‹œ ë°ì´í„°
                appData = {
                    principles: [
                        {
                            id: Date.now(),
                            title: 'ì†ì ˆ ì›ì¹™',
                            priority: 'high',
                            content: 'ë§¤ìˆ˜ê°€ ëŒ€ë¹„ -7% í•˜ë½ ì‹œ ë¬´ì¡°ê±´ ì†ì ˆí•œë‹¤.'
                        }
                    ],
                    watchlist: [],
                    portfolio: [],
                    trades: [],
                    analysis: [],
                    goals: [],
                    memos: [],
                    mindsetChecks: [],
                    emotionDiary: [],
                    mistakes: [],
                    successes: [],
                    quotes: [
                        {
                            id: Date.now(),
                            date: new Date().toISOString(),
                            content: 'ì‹œì¥ì€ ëˆì„ ì¡°ê¸‰í•œ ì‚¬ëŒì—ê²Œì„œ ì¸ë‚´ì‹¬ ìˆëŠ” ì‚¬ëŒì—ê²Œë¡œ ì˜®ê¸°ëŠ” ì¥ì¹˜ë‹¤. - ì›Œë Œ ë²„í•'
                        }
                    ]
                };
                saveUserData();
            }
            
            renderAll();
        }

        // ì‚¬ìš©ìë³„ ë°ì´í„° ì €ì¥
        function saveUserData() {
            if (!currentUser) return;
            const userDataKey = `investmentData_${currentUser}`;
            localStorage.setItem(userDataKey, JSON.stringify(appData));
        }

        // ê¸°ì¡´ saveData í•¨ìˆ˜ ìˆ˜ì •
        function saveData() {
            saveUserData();
        }

        // ê¸°ì¡´ loadData í•¨ìˆ˜ ìˆ˜ì •
        function loadData() {
            // ë¡œê·¸ì¸ ì²´í¬ê°€ ë¨¼ì € ì‹¤í–‰ë˜ë¯€ë¡œ ì—¬ê¸°ì„œëŠ” ì•„ë¬´ê²ƒë„ í•˜ì§€ ì•ŠìŒ
        }

        // í˜ì´ì§€ ë¡œë“œ
        window.addEventListener('load', () => {
            checkLogin(); // ë¡œê·¸ì¸ ì²´í¬ ë¨¼ì €
            initCharts();
            document.getElementById('tradeDate').valueAsDate = new Date();
        });

        // ì„¹ì…˜ ì „í™˜
        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.getElementById(sectionId).classList.add('active');
            
            document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');

            // íŠ¹ì • ì„¹ì…˜ ì§„ì… ì‹œ ì—…ë°ì´íŠ¸
            if (sectionId === 'performance') updatePerformance();
        }

        // ë°ì´í„° ë¡œë“œ
        function loadData() {
            const saved = localStorage.getItem('investmentDataComplete');
            if (saved) {
                appData = JSON.parse(saved);
            } else {
                // ì´ˆê¸° ì˜ˆì‹œ ë°ì´í„°
                appData = {
                    principles: [
                        {
                            id: Date.now(),
                            title: 'ì†ì ˆ ì›ì¹™',
                            priority: 'high',
                            content: 'ë§¤ìˆ˜ê°€ ëŒ€ë¹„ -7% í•˜ë½ ì‹œ ë¬´ì¡°ê±´ ì†ì ˆí•œë‹¤.'
                        }
                    ],
                    watchlist: [
                        {
                            id: Date.now(),
                            name: 'ì‚¼ì„±ì „ì',
                            code: '005930',
                            price: 70000,
                            targetPrice: 80000,
                            memo: 'AI ë°˜ë„ì²´ ìˆ˜ìš” ì¦ê°€ ê¸°ëŒ€'
                        }
                    ],
                    portfolio: [],
                    trades: [],
                    analysis: [],
                    goals: [],
                    memos: [],
                    mindsetChecks: [],
                    emotionDiary: [],
                    mistakes: [],
                    successes: [],
                    quotes: [
                        {
                            id: Date.now(),
                            date: new Date().toISOString(),
                            content: 'ì‹œì¥ì€ ëˆì„ ì¡°ê¸‰í•œ ì‚¬ëŒì—ê²Œì„œ ì¸ë‚´ì‹¬ ìˆëŠ” ì‚¬ëŒì—ê²Œë¡œ ì˜®ê¸°ëŠ” ì¥ì¹˜ë‹¤. - ì›Œë Œ ë²„í•'
                        }
                    ]
                };
                saveData();
            }
            renderAll();
        }

        // ë°ì´í„° ì €ì¥
        function saveData() {
            localStorage.setItem('investmentDataComplete', JSON.stringify(appData));
        }

        // ê¸ˆì•¡ í¬ë§·
        function formatMoney(num) {
            if (!num) return '0ì›';
            if (num >= 100000000) return (num / 100000000).toFixed(1) + 'ì–µì›';
            if (num >= 10000) return (num / 10000).toFixed(0) + 'ë§Œì›';
            return num.toLocaleString() + 'ì›';
        }

        // ë‚ ì§œ í¬ë§·
        function formatDate(dateString) {
            const date = new Date(dateString);
            return `${date.getFullYear()}.${String(date.getMonth() + 1).padStart(2, '0')}.${String(date.getDate()).padStart(2, '0')}`;
        }

        // ì°¨íŠ¸ ì´ˆê¸°í™”
        function initCharts() {
            // í¬íŠ¸í´ë¦¬ì˜¤ ì°¨íŠ¸
            const ctx1 = document.getElementById('portfolioChart');
            if (ctx1) {
                portfolioChart = new Chart(ctx1, {
                    type: 'line',
                    data: {
                        labels: ['1ì›”', '2ì›”', '3ì›”', '4ì›”', '5ì›”', '6ì›”'],
                        datasets: [{
                            label: 'í¬íŠ¸í´ë¦¬ì˜¤ ê°€ì¹˜',
                            data: [5000, 5200, 5400, 5300, 5600, 5800],
                            borderColor: 'rgb(37, 99, 235)',
                            backgroundColor: 'rgba(37, 99, 235, 0.1)',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false }
                        }
                    }
                });
            }

            // ì›”ë³„ ì°¨íŠ¸
            const ctx2 = document.getElementById('monthlyChart');
            if (ctx2) {
                monthlyChart = new Chart(ctx2, {
                    type: 'bar',
                    data: {
                        labels: ['1ì›”', '2ì›”', '3ì›”', '4ì›”', '5ì›”', '6ì›”'],
                        datasets: [{
                            label: 'ì›”ë³„ ì†ìµ',
                            data: [200, -100, 300, 150, 400, 250],
                            backgroundColor: function(context) {
                                const value = context.parsed.y;
                                return value >= 0 ? 'rgba(239, 68, 68, 0.8)' : 'rgba(37, 99, 235, 0.8)';
                            }
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false }
                        }
                    }
                });
            }
        }

        // =================
        // íˆ¬ì ì›ì¹™
        // =================
        function renderPrinciples() {
            const container = document.getElementById('principlesList');
            if (!container) return;

            if (appData.principles.length === 0) {
                container.innerHTML = '<div class="empty-state"><div class="empty-icon">ğŸ“œ</div><p>ë“±ë¡ëœ íˆ¬ì ì›ì¹™ì´ ì—†ìŠµë‹ˆë‹¤.</p></div>';
                return;
            }

            container.innerHTML = appData.principles.map(p => `
                <div class="item-card">
                    <div class="item-header">
                        <span class="item-title">${p.title}</span>
                        <span class="badge badge-${p.priority}">${
                            p.priority === 'high' ? 'ë†’ìŒ' : 
                            p.priority === 'medium' ? 'ë³´í†µ' : 'ë‚®ìŒ'
                        }</span>
                    </div>
                    <div class="item-content">${p.content}</div>
                    <button class="btn-danger btn-sm" onclick="deletePrinciple(${p.id})">ğŸ—‘ï¸ ì‚­ì œ</button>
                </div>
            `).join('');

            // ì˜¤ëŠ˜ì˜ ì›ì¹™
            const today = document.getElementById('todayPrinciple');
            if (today && appData.principles.length > 0) {
                const random = appData.principles[Math.floor(Math.random() * appData.principles.length)];
                today.innerHTML = `
                    <div class="item-card">
                        <div class="item-title">${random.title}</div>
                        <div class="item-content">${random.content}</div>
                    </div>
                `;
            }
        }

        function addPrinciple() {
            const title = document.getElementById('principleTitle').value.trim();
            const priority = document.getElementById('principlePriority').value;
            const content = document.getElementById('principleContent').value.trim();

            if (!title || !content) {
                alert('ì œëª©ê³¼ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”!');
                return;
            }

            appData.principles.push({
                id: Date.now(),
                title, priority, content
            });

            document.getElementById('principleTitle').value = '';
            document.getElementById('principleContent').value = '';

            saveData();
            renderPrinciples();
        }

        function deletePrinciple(id) {
            if (!confirm('ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
            appData.principles = appData.principles.filter(p => p.id !== id);
            saveData();
            renderPrinciples();
        }

        // =================
        // ì‹¤ì‹œê°„ ì£¼ê°€ ì¡°íšŒ
        // =================
        
        // í•œêµ­ ì£¼ì‹ ì¢…ëª© ë°ì´í„° (ì£¼ìš” ì¢…ëª©)
        const koreanStocks = [
            { name: 'ì‚¼ì„±ì „ì', code: '005930' },
            { name: 'SKí•˜ì´ë‹‰ìŠ¤', code: '000660' },
            { name: 'LGì—ë„ˆì§€ì†”ë£¨ì…˜', code: '373220' },
            { name: 'NAVER', code: '035420' },
            { name: 'ì¹´ì¹´ì˜¤', code: '035720' },
            { name: 'í˜„ëŒ€ì°¨', code: '005380' },
            { name: 'KBê¸ˆìœµ', code: '105560' },
            { name: 'ì‹ í•œì§€ì£¼', code: '055550' },
            { name: 'ê¸°ì•„', code: '000270' },
            { name: 'ì…€íŠ¸ë¦¬ì˜¨', code: '068270' },
            { name: 'ì‚¼ì„±ë°”ì´ì˜¤ë¡œì§ìŠ¤', code: '207940' },
            { name: 'POSCOí™€ë”©ìŠ¤', code: '005490' },
            { name: 'ì‚¼ì„±SDI', code: '006400' },
            { name: 'í˜„ëŒ€ëª¨ë¹„ìŠ¤', code: '012330' },
            { name: 'LGí™”í•™', code: '051910' },
            { name: 'SKì´ë…¸ë² ì´ì…˜', code: '096770' },
            { name: 'LGì „ì', code: '066570' },
            { name: 'ì‚¼ì„±ë¬¼ì‚°', code: '028260' },
            { name: 'í•œêµ­ì „ë ¥', code: '015760' },
            { name: 'SKí…”ë ˆì½¤', code: '017670' },
            { name: 'KT', code: '030200' },
            { name: 'HMM', code: '011200' },
            { name: 'ì‚¼ì„±ìƒëª…', code: '032830' },
            { name: 'í•˜ë‚˜ê¸ˆìœµì§€ì£¼', code: '086790' },
            { name: 'ìš°ë¦¬ê¸ˆìœµì§€ì£¼', code: '316140' },
            { name: 'í¬ìŠ¤ì½”í“¨ì²˜ì— ', code: '003670' },
            { name: 'ê³ ë ¤ì•„ì—°', code: '010130' },
            { name: 'ì—”ì”¨ì†Œí”„íŠ¸', code: '036570' },
            { name: 'ë„·ë§ˆë¸”', code: '251270' },
            { name: 'í¬ë˜í”„í†¤', code: '259960' },
            { name: 'ì¹´ì¹´ì˜¤ë±…í¬', code: '323410' },
            { name: 'ì¹´ì¹´ì˜¤í˜ì´', code: '377300' },
            { name: 'ë‘ì‚°ì—ë„ˆë¹Œë¦¬í‹°', code: '034020' },
            { name: 'SKìŠ¤í€˜ì–´', code: '402340' },
            { name: 'LGìƒí™œê±´ê°•', code: '051900' },
            { name: 'ì•„ëª¨ë ˆí¼ì‹œí”½', code: '090430' },
            { name: 'ì¿ íŒ¡', code: 'CPNG' },
            { name: 'ì‚¼ì„±ì „ê¸°', code: '009150' },
            { name: 'SK', code: '034730' },
            { name: 'LG', code: '003550' },
            { name: 'í•œí™”ì—ì–´ë¡œìŠ¤í˜ì´ìŠ¤', code: '012450' },
            { name: 'ì—ì½”í”„ë¡œë¹„ì— ', code: '247540' },
            { name: 'ì—ì½”í”„ë¡œ', code: '086520' },
            { name: 'í¬ìŠ¤ì½”ì¸í„°ë‚´ì…”ë„', code: '047050' },
            { name: 'ì‚¼ì„±í™”ì¬', code: '000810' },
            { name: 'ê¸°ì—…ì€í–‰', code: '024110' },
            { name: 'ë¡¯ë°ì¼€ë¯¸ì¹¼', code: '011170' },
            { name: 'SKë°”ì´ì˜¤íŒœ', code: '326030' },
            { name: 'ì‚¼ì„±ì—ìŠ¤ë””ì—ìŠ¤', code: '018260' },
            { name: 'CJì œì¼ì œë‹¹', code: '097950' }
        ];
        
        // ë¯¸êµ­ ì£¼ì‹ ì¢…ëª© ë°ì´í„° (ì£¼ìš” ì¢…ëª©)
        const usStocks = [
            { name: 'ì• í”Œ', code: 'AAPL' },
            { name: 'Apple', code: 'AAPL' },
            { name: 'ë§ˆì´í¬ë¡œì†Œí”„íŠ¸', code: 'MSFT' },
            { name: 'Microsoft', code: 'MSFT' },
            { name: 'êµ¬ê¸€', code: 'GOOGL' },
            { name: 'Google', code: 'GOOGL' },
            { name: 'ì•ŒíŒŒë²³', code: 'GOOGL' },
            { name: 'ì•„ë§ˆì¡´', code: 'AMZN' },
            { name: 'Amazon', code: 'AMZN' },
            { name: 'í…ŒìŠ¬ë¼', code: 'TSLA' },
            { name: 'Tesla', code: 'TSLA' },
            { name: 'ì—”ë¹„ë””ì•„', code: 'NVDA' },
            { name: 'NVIDIA', code: 'NVDA' },
            { name: 'ë©”íƒ€', code: 'META' },
            { name: 'Meta', code: 'META' },
            { name: 'í˜ì´ìŠ¤ë¶', code: 'META' },
            { name: 'ë„·í”Œë¦­ìŠ¤', code: 'NFLX' },
            { name: 'Netflix', code: 'NFLX' },
            { name: 'ë””ì¦ˆë‹ˆ', code: 'DIS' },
            { name: 'Disney', code: 'DIS' },
            { name: 'ë‚˜ì´í‚¤', code: 'NKE' },
            { name: 'Nike', code: 'NKE' },
            { name: 'ì½”ì¹´ì½œë¼', code: 'KO' },
            { name: 'Coca-Cola', code: 'KO' },
            { name: 'ë§¥ë„ë‚ ë“œ', code: 'MCD' },
            { name: "McDonald's", code: 'MCD' },
            { name: 'AMD', code: 'AMD' },
            { name: 'ì¸í…”', code: 'INTC' },
            { name: 'Intel', code: 'INTC' },
            { name: 'í€„ì»´', code: 'QCOM' },
            { name: 'Qualcomm', code: 'QCOM' },
            { name: 'íŒ”ë€í‹°ì–´', code: 'PLTR' },
            { name: 'Palantir', code: 'PLTR' }
        ];
        
        // ì „ì²´ ì¢…ëª© ë¦¬ìŠ¤íŠ¸
        const allStocks = [...koreanStocks, ...usStocks];
        
        // ì¢…ëª© ê²€ìƒ‰ í•¨ìˆ˜
        let searchTimeout = null;
        
        function searchStock(query) {
            const resultsDiv = document.getElementById('stockSearchResults');
            
            if (!query || query.length < 1) {
                resultsDiv.style.display = 'none';
                return;
            }
            
            // ë””ë°”ìš´ì‹± (0.3ì´ˆ ëŒ€ê¸°)
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(() => {
                const results = allStocks.filter(stock => 
                    stock.name.toLowerCase().includes(query.toLowerCase()) ||
                    stock.code.toLowerCase().includes(query.toLowerCase())
                ).slice(0, 10); // ìµœëŒ€ 10ê°œ
                
                if (results.length === 0) {
                    resultsDiv.innerHTML = '<div style="padding: 10px; color: var(--gray);">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤</div>';
                    resultsDiv.style.display = 'block';
                    return;
                }
                
                resultsDiv.innerHTML = results.map(stock => `
                    <div onclick="selectStock('${stock.name}', '${stock.code}')" 
                        style="padding: 12px; cursor: pointer; border-bottom: 1px solid var(--light); 
                        transition: background 0.2s;"
                        onmouseover="this.style.background='var(--light)'"
                        onmouseout="this.style.background='white'">
                        <strong>${stock.name}</strong>
                        <span style="color: var(--gray); margin-left: 10px; font-size: 13px;">${stock.code}</span>
                    </div>
                `).join('');
                
                resultsDiv.style.display = 'block';
            }, 300);
        }
        
        // ì¢…ëª© ì„ íƒ í•¨ìˆ˜
        async function selectStock(name, code) {
            document.getElementById('stockName').value = name;
            document.getElementById('stockCode').value = code;
            document.getElementById('stockSearch').value = name;
            document.getElementById('stockSearchResults').style.display = 'none';
            
            // ìë™ìœ¼ë¡œ ê°€ê²© ì¡°íšŒ
            await fetchStockPrice();
        }
        
        // í¬íŠ¸í´ë¦¬ì˜¤ ì¢…ëª© ê²€ìƒ‰
        function searchPortfolioStock(query) {
            const resultsDiv = document.getElementById('portStockSearchResults');
            
            if (!query || query.length < 1) {
                resultsDiv.style.display = 'none';
                return;
            }
            
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(() => {
                const results = allStocks.filter(stock => 
                    stock.name.toLowerCase().includes(query.toLowerCase()) ||
                    stock.code.toLowerCase().includes(query.toLowerCase())
                ).slice(0, 10);
                
                if (results.length === 0) {
                    resultsDiv.innerHTML = '<div style="padding: 10px; color: var(--gray);">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤</div>';
                    resultsDiv.style.display = 'block';
                    return;
                }
                
                resultsDiv.innerHTML = results.map(stock => `
                    <div onclick="selectPortfolioStock('${stock.name}', '${stock.code}')" 
                        style="padding: 12px; cursor: pointer; border-bottom: 1px solid var(--light);"
                        onmouseover="this.style.background='var(--light)'"
                        onmouseout="this.style.background='white'">
                        <strong>${stock.name}</strong>
                        <span style="color: var(--gray); margin-left: 10px; font-size: 13px;">${stock.code}</span>
                    </div>
                `).join('');
                
                resultsDiv.style.display = 'block';
            }, 300);
        }
        
        // í¬íŠ¸í´ë¦¬ì˜¤ ì¢…ëª© ì„ íƒ
        async function selectPortfolioStock(name, code) {
            document.getElementById('portStockName').value = name;
            document.getElementById('portStockCode').value = code;
            document.getElementById('portStockSearch').value = name;
            document.getElementById('portStockSearchResults').style.display = 'none';
            
            // ìë™ìœ¼ë¡œ ê°€ê²© ì¡°íšŒ
            await fetchPortfolioPrice();
        }
        
        // ê²€ìƒ‰ì°½ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
        document.addEventListener('click', function(e) {
            if (!e.target.closest('#stockSearch') && !e.target.closest('#stockSearchResults')) {
                const resultsDiv = document.getElementById('stockSearchResults');
                if (resultsDiv) resultsDiv.style.display = 'none';
            }
            if (!e.target.closest('#portStockSearch') && !e.target.closest('#portStockSearchResults')) {
                const resultsDiv = document.getElementById('portStockSearchResults');
                if (resultsDiv) resultsDiv.style.display = 'none';
            }
        });
        
        // ì£¼ê°€ ì¡°íšŒ (ë„¤ì´ë²„ ê¸ˆìœµ ìŠ¤í¬ë˜í•‘ ë°©ì‹)
        async function fetchStockPrice() {
            const code = document.getElementById('stockCode').value.trim();
            const nameInput = document.getElementById('stockName');
            
            if (!code) {
                alert('ì¢…ëª© ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”!');
                return;
            }
            
            // ë¡œë”© í‘œì‹œ
            const priceInput = document.getElementById('stockPrice');
            const updateTime = document.getElementById('priceUpdateTime');
            priceInput.value = '';
            updateTime.textContent = 'ì¡°íšŒ ì¤‘...';
            updateTime.style.color = 'var(--primary)';
            
            try {
                let price = null;
                let symbol = code;
                
                // í•œêµ­ ì£¼ì‹ì¸ ê²½ìš°
                if (/^\d{6}$/.test(code)) {
                    // ë°©ë²• 1: Alpha Vantage API (ë¬´ë£Œ, ì•ˆì •ì )
                    // ì£¼ì˜: í•˜ë£¨ 25íšŒ ì œí•œ
                    try {
                        const response = await fetch(`https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=${code}.KRX&apikey=demo`);
                        const data = await response.json();
                        
                        if (data['Global Quote'] && data['Global Quote']['05. price']) {
                            price = parseFloat(data['Global Quote']['05. price']);
                        }
                    } catch (e) {
                        console.log('Alpha Vantage ì‹¤íŒ¨, ëŒ€ì²´ ë°©ë²• ì‹œë„');
                    }
                    
                    // ë°©ë²• 2: Yahoo Finance (ë°±ì—…)
                    if (!price) {
                        try {
                            symbol = code + '.KS';
                            const response = await fetch(`https://query1.finance.yahoo.com/v8/finance/chart/${symbol}?interval=1d&range=1d`);
                            const data = await response.json();
                            
                            if (data.chart.result && data.chart.result[0]) {
                                price = data.chart.result[0].meta.regularMarketPrice;
                            }
                        } catch (e) {
                            console.log('Yahoo Finance ì‹¤íŒ¨');
                        }
                    }
                    
                } else {
                    // ë¯¸êµ­ ì£¼ì‹
                    try {
                        const response = await fetch(`https://query1.finance.yahoo.com/v8/finance/chart/${code}?interval=1d&range=1d`);
                        const data = await response.json();
                        
                        if (data.chart.result && data.chart.result[0]) {
                            price = data.chart.result[0].meta.regularMarketPrice;
                        }
                    } catch (e) {
                        console.log('ë¯¸êµ­ ì£¼ì‹ ì¡°íšŒ ì‹¤íŒ¨');
                    }
                }
                
                if (price) {
                    // ê°€ê²© ì…ë ¥
                    priceInput.value = Math.round(price);
                    priceInput.readOnly = false;
                    priceInput.style.background = 'white';
                    
                    // ì—…ë°ì´íŠ¸ ì‹œê°„
                    const now = new Date();
                    updateTime.textContent = `âœ… ${now.getHours()}:${String(now.getMinutes()).padStart(2, '0')} ì—…ë°ì´íŠ¸`;
                    updateTime.style.color = 'var(--success)';
                    
                } else {
                    throw new Error('ê°€ê²© ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
                }
                
            } catch (error) {
                console.error('ì£¼ê°€ ì¡°íšŒ ì‹¤íŒ¨:', error);
                
                // ì‹¤íŒ¨ ì‹œ ìˆ˜ë™ ì…ë ¥ ê°€ëŠ¥í•˜ë„ë¡
                priceInput.readOnly = false;
                priceInput.style.background = 'white';
                priceInput.placeholder = 'ì§ì ‘ ì…ë ¥í•˜ì„¸ìš”';
                
                updateTime.innerHTML = `
                    âŒ ìë™ ì¡°íšŒ ì‹¤íŒ¨<br>
                    <small style="font-size: 11px;">
                        <a href="https://finance.naver.com/item/main.naver?code=${code}" target="_blank" style="color: var(--primary);">
                            ë„¤ì´ë²„ ê¸ˆìœµì—ì„œ í™•ì¸ â†’
                        </a>
                    </small>
                `;
                updateTime.style.color = 'var(--danger)';
            }
        }
        
        // í¬íŠ¸í´ë¦¬ì˜¤ ê°€ê²© ì¡°íšŒ
        async function fetchPortfolioPrice() {
            const code = document.getElementById('portStockCode').value.trim();
            
            if (!code) {
                alert('ì¢…ëª© ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”!');
                return;
            }
            
            const priceInput = document.getElementById('portCurrentPrice');
            const updateTime = document.getElementById('portPriceUpdateTime');
            priceInput.value = '';
            updateTime.textContent = 'ì¡°íšŒ ì¤‘...';
            updateTime.style.color = 'var(--primary)';
            
            try {
                let price = null;
                let symbol = code;
                
                if (/^\d{6}$/.test(code)) {
                    // í•œêµ­ ì£¼ì‹
                    try {
                        symbol = code + '.KS';
                        const response = await fetch(`https://query1.finance.yahoo.com/v8/finance/chart/${symbol}?interval=1d&range=1d`);
                        const data = await response.json();
                        
                        if (data.chart.result && data.chart.result[0]) {
                            price = data.chart.result[0].meta.regularMarketPrice;
                        }
                    } catch (e) {
                        console.log('ì¡°íšŒ ì‹¤íŒ¨');
                    }
                } else {
                    // ë¯¸êµ­ ì£¼ì‹
                    try {
                        const response = await fetch(`https://query1.finance.yahoo.com/v8/finance/chart/${code}?interval=1d&range=1d`);
                        const data = await response.json();
                        
                        if (data.chart.result && data.chart.result[0]) {
                            price = data.chart.result[0].meta.regularMarketPrice;
                        }
                    } catch (e) {
                        console.log('ì¡°íšŒ ì‹¤íŒ¨');
                    }
                }
                
                if (price) {
                    priceInput.value = Math.round(price);
                    priceInput.readOnly = false;
                    priceInput.style.background = 'white';
                    
                    const now = new Date();
                    updateTime.textContent = `âœ… ${now.getHours()}:${String(now.getMinutes()).padStart(2, '0')} ì—…ë°ì´íŠ¸`;
                    updateTime.style.color = 'var(--success)';
                } else {
                    throw new Error('ì¡°íšŒ ì‹¤íŒ¨');
                }
                
            } catch (error) {
                priceInput.readOnly = false;
                priceInput.style.background = 'white';
                priceInput.placeholder = 'ì§ì ‘ ì…ë ¥í•˜ì„¸ìš”';
                updateTime.innerHTML = `<a href="https://finance.naver.com/item/main.naver?code=${code}" target="_blank" style="color: var(--primary); font-size: 11px;">ë„¤ì´ë²„ ê¸ˆìœµì—ì„œ í™•ì¸ â†’</a>`;
                updateTime.style.color = 'var(--danger)';
            }
        }
        
        // ì „ì²´ ê´€ì‹¬ ì¢…ëª© ê°€ê²© ì—…ë°ì´íŠ¸
        async function updateWatchlistPrices() {
            if (appData.watchlist.length === 0) {
                alert('ê´€ì‹¬ ì¢…ëª©ì´ ì—†ìŠµë‹ˆë‹¤!');
                return;
            }
            
            if (!confirm(`${appData.watchlist.length}ê°œ ì¢…ëª©ì˜ ê°€ê²©ì„ ì—…ë°ì´íŠ¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                return;
            }
            
            let updated = 0;
            let failed = 0;
            
            for (const stock of appData.watchlist) {
                if (!stock.code) {
                    failed++;
                    continue;
                }
                
                try {
                    let symbol = stock.code;
                    if (/^\d{6}$/.test(stock.code)) {
                        symbol = stock.code + '.KS';
                    }
                    
                    const response = await fetch(`https://query1.finance.yahoo.com/v8/finance/chart/${symbol}?interval=1d&range=1d`);
                    const data = await response.json();
                    
                    if (data.chart.result && data.chart.result[0]) {
                        const price = data.chart.result[0].meta.regularMarketPrice;
                        stock.price = Math.round(price);
                        stock.lastUpdate = new Date().toISOString();
                        updated++;
                    } else {
                        failed++;
                    }
                    
                    // API í˜¸ì¶œ ì œí•œ ë°©ì§€ (0.5ì´ˆ ëŒ€ê¸°)
                    await new Promise(resolve => setTimeout(resolve, 500));
                    
                } catch (error) {
                    console.error(`${stock.name} ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:`, error);
                    failed++;
                }
            }
            
            saveData();
            renderWatchlist();
            updateDashboard();
            
            alert(`ì—…ë°ì´íŠ¸ ì™„ë£Œ!\nì„±ê³µ: ${updated}ê°œ\nì‹¤íŒ¨: ${failed}ê°œ`);
        }
        
        // ì „ì²´ í¬íŠ¸í´ë¦¬ì˜¤ ê°€ê²© ì—…ë°ì´íŠ¸
        async function updateAllPrices() {
            if (appData.portfolio.length === 0) {
                alert('ë³´ìœ  ì¢…ëª©ì´ ì—†ìŠµë‹ˆë‹¤!');
                return;
            }
            
            if (!confirm(`${appData.portfolio.length}ê°œ ì¢…ëª©ì˜ í˜„ì¬ê°€ë¥¼ ì—…ë°ì´íŠ¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                return;
            }
            
            let updated = 0;
            let failed = 0;
            
            for (const stock of appData.portfolio) {
                if (!stock.code) {
                    failed++;
                    continue;
                }
                
                try {
                    let symbol = stock.code;
                    if (/^\d{6}$/.test(stock.code)) {
                        symbol = stock.code + '.KS';
                    }
                    
                    const response = await fetch(`https://query1.finance.yahoo.com/v8/finance/chart/${symbol}?interval=1d&range=1d`);
                    const data = await response.json();
                    
                    if (data.chart.result && data.chart.result[0]) {
                        const price = data.chart.result[0].meta.regularMarketPrice;
                        stock.currentPrice = Math.round(price);
                        stock.lastUpdate = new Date().toISOString();
                        updated++;
                    } else {
                        failed++;
                    }
                    
                    await new Promise(resolve => setTimeout(resolve, 500));
                    
                } catch (error) {
                    console.error(`${stock.name} ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:`, error);
                    failed++;
                }
            }
            
            saveData();
            renderPortfolio();
            
            alert(`ì—…ë°ì´íŠ¸ ì™„ë£Œ!\nì„±ê³µ: ${updated}ê°œ\nì‹¤íŒ¨: ${failed}ê°œ`);
        }

        // =================
        // ê´€ì‹¬ ì¢…ëª©
        // =================
        function renderWatchlist() {
            const container = document.getElementById('watchlistItems');
            if (!container) return;

            if (appData.watchlist.length === 0) {
                container.innerHTML = '<div class="empty-state"><div class="empty-icon">ğŸ‘€</div><p>ê´€ì‹¬ ì¢…ëª©ì´ ì—†ìŠµë‹ˆë‹¤.</p></div>';
                return;
            }

            container.innerHTML = appData.watchlist.map(s => {
                const change = ((s.targetPrice - s.price) / s.price * 100).toFixed(2);
                const updateTime = s.lastUpdate ? formatDate(s.lastUpdate) : '';
                
                return `
                    <div class="item-card">
                        <div class="item-header">
                            <div>
                                <span class="item-title">${s.name}</span>
                                ${s.code ? `<span style="color: var(--gray); margin-left: 10px;">${s.code}</span>` : ''}
                            </div>
                            <span class="price-up" style="font-size: 20px; font-weight: bold;">
                                ${s.price.toLocaleString()}ì›
                            </span>
                        </div>
                        <div class="item-meta">
                            <span>ëª©í‘œê°€: ${s.targetPrice.toLocaleString()}ì›</span>
                            <span style="color: ${change > 0 ? 'var(--danger)' : 'var(--primary)'}">
                                ê¸°ëŒ€ìˆ˜ìµ: ${change}%
                            </span>
                            ${updateTime ? `<span style="font-size: 11px;">ì—…ë°ì´íŠ¸: ${updateTime}</span>` : ''}
                        </div>
                        ${s.memo ? `<div class="item-content">${s.memo}</div>` : ''}
                        <button class="btn-danger btn-sm" onclick="deleteWatchlist(${s.id})">ğŸ—‘ï¸ ì‚­ì œ</button>
                    </div>
                `;
            }).join('');
        }

        function addWatchlist() {
            const name = document.getElementById('stockName').value.trim();
            const code = document.getElementById('stockCode').value.trim();
            const price = parseFloat(document.getElementById('stockPrice').value);
            const targetPrice = parseFloat(document.getElementById('targetPrice').value);
            const memo = document.getElementById('stockMemo').value.trim();

            if (!name || !price || !targetPrice) {
                alert('ì¢…ëª©ëª…, í˜„ì¬ê°€, ëª©í‘œê°€ëŠ” í•„ìˆ˜ì…ë‹ˆë‹¤!');
                return;
            }

            appData.watchlist.push({
                id: Date.now(),
                name, code, price, targetPrice, memo
            });

            document.getElementById('stockName').value = '';
            document.getElementById('stockCode').value = '';
            document.getElementById('stockPrice').value = '';
            document.getElementById('targetPrice').value = '';
            document.getElementById('stockMemo').value = '';

            saveData();
            renderWatchlist();
            updateDashboard();
        }

        function deleteWatchlist(id) {
            if (!confirm('ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
            appData.watchlist = appData.watchlist.filter(s => s.id !== id);
            saveData();
            renderWatchlist();
            updateDashboard();
        }

        // =================
        // í¬íŠ¸í´ë¦¬ì˜¤
        // =================
        function renderPortfolio() {
            const container = document.getElementById('portfolioItems');
            if (!container) return;

            if (appData.portfolio.length === 0) {
                container.innerHTML = '<div class="empty-state"><div class="empty-icon">ğŸ’¼</div><p>ë³´ìœ  ì¢…ëª©ì´ ì—†ìŠµë‹ˆë‹¤.</p></div>';
                return;
            }

            let totalValue = 0;
            let totalCost = 0;

            const html = appData.portfolio.map(p => {
                const value = p.currentPrice * p.quantity;
                const cost = p.buyPrice * p.quantity;
                const profit = value - cost;
                const profitRate = ((profit / cost) * 100).toFixed(2);

                totalValue += value;
                totalCost += cost;

                return `
                    <div class="item-card">
                        <div class="item-header">
                            <span class="item-title">${p.name}</span>
                            <span class="${profit >= 0 ? 'price-up' : 'price-down'}" style="font-size: 20px; font-weight: bold;">
                                ${p.currentPrice.toLocaleString()}ì›
                            </span>
                        </div>
                        <div class="item-meta">
                            <span>ë³´ìœ : ${p.quantity}ì£¼</span>
                            <span>í‰ê· ê°€: ${p.buyPrice.toLocaleString()}ì›</span>
                            <span>í‰ê°€ì•¡: ${value.toLocaleString()}ì›</span>
                        </div>
                        <div style="margin: 10px 0; padding: 10px; background: ${profit >= 0 ? '#fee2e2' : '#dbeafe'}; border-radius: 8px;">
                            <strong style="color: ${profit >= 0 ? 'var(--danger)' : 'var(--primary)'}; font-size: 16px;">
                                ${profit >= 0 ? '+' : ''}${profit.toLocaleString()}ì› (${profitRate}%)
                            </strong>
                        </div>
                        <button class="btn-danger btn-sm" onclick="deletePortfolio(${p.id})">ğŸ—‘ï¸ ì‚­ì œ</button>
                    </div>
                `;
            }).join('');

            container.innerHTML = html;

            // ëŒ€ì‹œë³´ë“œ ì—…ë°ì´íŠ¸
            updateDashboard();
        }

        function addPortfolio() {
            const name = document.getElementById('portStockName').value.trim();
            const code = document.getElementById('portStockCode').value.trim();
            const quantity = parseInt(document.getElementById('portQuantity').value);
            const buyPrice = parseFloat(document.getElementById('portBuyPrice').value);
            const currentPrice = parseFloat(document.getElementById('portCurrentPrice').value);

            if (!name || !quantity || !buyPrice || !currentPrice) {
                alert('í•„ìˆ˜ í•„ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”!');
                return;
            }

            appData.portfolio.push({
                id: Date.now(),
                name, code, quantity, buyPrice, currentPrice,
                lastUpdate: new Date().toISOString()
            });

            document.getElementById('portStockName').value = '';
            document.getElementById('portStockCode').value = '';
            document.getElementById('portQuantity').value = '';
            document.getElementById('portBuyPrice').value = '';
            document.getElementById('portCurrentPrice').value = '';
            document.getElementById('portPriceUpdateTime').textContent = '';

            saveData();
            renderPortfolio();
        }

        function deletePortfolio(id) {
            if (!confirm('ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
            appData.portfolio = appData.portfolio.filter(p => p.id !== id);
            saveData();
            renderPortfolio();
        }

        // =================
        // ë§¤ë§¤ ì¼ì§€
        // =================
        function renderTrades() {
            const container = document.getElementById('tradesList');
            if (!container) return;

            if (appData.trades.length === 0) {
                container.innerHTML = '<div class="empty-state"><div class="empty-icon">ğŸ“ˆ</div><p>ë§¤ë§¤ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</p></div>';
                return;
            }

            container.innerHTML = appData.trades.map(t => {
                const amount = t.price * t.quantity;
                return `
                    <div class="item-card">
                        <div class="item-header">
                            <div>
                                <span class="badge ${t.type === 'buy' ? 'badge-danger' : 'badge-success'}">
                                    ${t.type === 'buy' ? 'ë§¤ìˆ˜' : 'ë§¤ë„'}
                                </span>
                                <strong style="margin-left: 10px; font-size: 18px;">${t.name}</strong>
                            </div>
                            <span style="color: var(--gray); font-size: 14px;">${formatDate(t.date)}</span>
                        </div>
                        <div class="item-meta">
                            <span>${t.quantity}ì£¼ @ ${t.price.toLocaleString()}ì›</span>
                            <span>ì´ì•¡: ${amount.toLocaleString()}ì›</span>
                            ${t.strategy ? `<span>ì „ëµ: ${t.strategy}</span>` : ''}
                        </div>
                        ${t.memo ? `<div class="item-content">${t.memo}</div>` : ''}
                        <button class="btn-danger btn-sm" onclick="deleteTrade(${t.id})">ğŸ—‘ï¸ ì‚­ì œ</button>
                    </div>
                `;
            }).join('');
        }

        function addTrade() {
            const type = document.getElementById('tradeType').value;
            const name = document.getElementById('tradeName').value.trim();
            const quantity = parseInt(document.getElementById('tradeQuantity').value);
            const price = parseFloat(document.getElementById('tradePrice').value);
            const date = document.getElementById('tradeDate').value;
            const strategy = document.getElementById('tradeStrategy').value.trim();
            const memo = document.getElementById('tradeMemo').value.trim();

            if (!name || !quantity || !price || !date) {
                alert('í•„ìˆ˜ í•­ëª©ì„ ì…ë ¥í•˜ì„¸ìš”!');
                return;
            }

            appData.trades.unshift({
                id: Date.now(),
                type, name, quantity, price, date, strategy, memo
            });

            document.getElementById('tradeName').value = '';
            document.getElementById('tradeQuantity').value = '';
            document.getElementById('tradePrice').value = '';
            document.getElementById('tradeStrategy').value = '';
            document.getElementById('tradeMemo').value = '';

            saveData();
            renderTrades();
            updateDashboard();
        }

        function deleteTrade(id) {
            if (!confirm('ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
            appData.trades = appData.trades.filter(t => t.id !== id);
            saveData();
            renderTrades();
            updateDashboard();
        }

        // =================
        // ì¢…ëª© ë¶„ì„
        // =================
        function renderAnalysis() {
            const container = document.getElementById('analysisItems');
            if (!container) return;

            if (appData.analysis.length === 0) {
                container.innerHTML = '<div class="empty-state"><div class="empty-icon">ğŸ”</div><p>ë¶„ì„ ìë£Œê°€ ì—†ìŠµë‹ˆë‹¤.</p></div>';
                return;
            }

            container.innerHTML = appData.analysis.map(a => {
                const avgScore = ((a.scoreFinancial + a.scoreGrowth + a.scoreProfitability + a.scoreValuation) / 4).toFixed(1);
                
                return `
                    <div class="item-card">
                        <div class="item-header">
                            <div>
                                <span class="item-title">${a.name}</span>
                                ${a.sector ? `<span class="badge badge-info" style="margin-left: 10px;">${a.sector}</span>` : ''}
                            </div>
                            <span style="font-size: 24px; font-weight: bold; color: var(--primary);">
                                ${avgScore}ì 
                            </span>
                        </div>

                        <div style="margin: 15px 0;">
                            <h4 style="margin-bottom: 10px; font-size: 14px;">ì¬ë¬´ ì§€í‘œ</h4>
                            <div class="item-meta">
                                <span>PER: ${a.per || '-'}</span>
                                <span>PBR: ${a.pbr || '-'}</span>
                                <span>ROE: ${a.roe || '-'}%</span>
                                <span>ë¶€ì±„ë¹„ìœ¨: ${a.debt || '-'}%</span>
                            </div>
                        </div>

                        <div>
                            <h4 style="margin-bottom: 10px; font-size: 14px;">íˆ¬ì ì ìˆ˜</h4>
                            <div class="score-item">
                                <span class="score-label">ì¬ë¬´ ê±´ì „ì„±</span>
                                <div class="score-bar">
                                    <div class="score-fill" style="width: ${a.scoreFinancial}%"></div>
                                </div>
                                <span class="score-value">${a.scoreFinancial}</span>
                            </div>
                            <div class="score-item">
                                <span class="score-label">ì„±ì¥ì„±</span>
                                <div class="score-bar">
                                    <div class="score-fill" style="width: ${a.scoreGrowth}%"></div>
                                </div>
                                <span class="score-value">${a.scoreGrowth}</span>
                            </div>
                            <div class="score-item">
                                <span class="score-label">ìˆ˜ìµì„±</span>
                                <div class="score-bar">
                                    <div class="score-fill" style="width: ${a.scoreProfitability}%"></div>
                                </div>
                                <span class="score-value">${a.scoreProfitability}</span>
                            </div>
                            <div class="score-item">
                                <span class="score-label">ë°¸ë¥˜ì—ì´ì…˜</span>
                                <div class="score-bar">
                                    <div class="score-fill" style="width: ${a.scoreValuation}%"></div>
                                </div>
                                <span class="score-value">${a.scoreValuation}</span>
                            </div>
                        </div>

                        ${a.content ? `<div class="item-content" style="margin-top: 15px;">${a.content}</div>` : ''}
                        
                        <button class="btn-danger btn-sm" onclick="deleteAnalysis(${a.id})">ğŸ—‘ï¸ ì‚­ì œ</button>
                    </div>
                `;
            }).join('');
        }

        function addAnalysis() {
            const name = document.getElementById('analysisName').value.trim();
            const sector = document.getElementById('analysisSector').value.trim();
            const per = parseFloat(document.getElementById('analysisPer').value) || null;
            const pbr = parseFloat(document.getElementById('analysisPbr').value) || null;
            const roe = parseFloat(document.getElementById('analysisRoe').value) || null;
            const debt = parseFloat(document.getElementById('analysisDebt').value) || null;
            const scoreFinancial = parseInt(document.getElementById('scoreFinancial').value) || 0;
            const scoreGrowth = parseInt(document.getElementById('scoreGrowth').value) || 0;
            const scoreProfitability = parseInt(document.getElementById('scoreProfitability').value) || 0;
            const scoreValuation = parseInt(document.getElementById('scoreValuation').value) || 0;
            const content = document.getElementById('analysisContent').value.trim();

            if (!name) {
                alert('ì¢…ëª©ëª…ì„ ì…ë ¥í•˜ì„¸ìš”!');
                return;
            }

            appData.analysis.push({
                id: Date.now(),
                name, sector, per, pbr, roe, debt,
                scoreFinancial, scoreGrowth, scoreProfitability, scoreValuation,
                content
            });

            // í¼ ì´ˆê¸°í™”
            document.getElementById('analysisName').value = '';
            document.getElementById('analysisSector').value = '';
            document.getElementById('analysisPer').value = '';
            document.getElementById('analysisPbr').value = '';
            document.getElementById('analysisRoe').value = '';
            document.getElementById('analysisDebt').value = '';
            document.getElementById('scoreFinancial').value = '';
            document.getElementById('scoreGrowth').value = '';
            document.getElementById('scoreProfitability').value = '';
            document.getElementById('scoreValuation').value = '';
            document.getElementById('analysisContent').value = '';

            saveData();
            renderAnalysis();
        }

        function deleteAnalysis(id) {
            if (!confirm('ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
            appData.analysis = appData.analysis.filter(a => a.id !== id);
            saveData();
            renderAnalysis();
        }

        // =================
        // ëª©í‘œ ê´€ë¦¬
        // =================
        function renderGoals() {
            const container = document.getElementById('goalsList');
            if (!container) return;

            if (appData.goals.length === 0) {
                container.innerHTML = '<div class="empty-state"><div class="empty-icon">ğŸ†</div><p>íˆ¬ì ëª©í‘œê°€ ì—†ìŠµë‹ˆë‹¤.</p></div>';
                return;
            }

            container.innerHTML = appData.goals.map(g => {
                const progress = (g.current / g.target * 100).toFixed(1);
                const remaining = g.target - g.current;
                const daysLeft = Math.ceil((new Date(g.targetDate) - new Date()) / (1000 * 60 * 60 * 24));

                return `
                    <div class="item-card">
                        <div class="item-header">
                            <span class="item-title">${g.title}</span>
                            <span class="badge badge-info">D-${daysLeft > 0 ? daysLeft : 0}</span>
                        </div>
                        <div class="progress">
                            <div class="progress-bar" style="width: ${progress}%">
                                ${progress}%
                            </div>
                        </div>
                        <div class="item-meta" style="margin-top: 10px;">
                            <span>í˜„ì¬: ${formatMoney(g.current)}</span>
                            <span>ëª©í‘œ: ${formatMoney(g.target)}</span>
                            <span>ë‚¨ì€ ê¸ˆì•¡: ${formatMoney(remaining)}</span>
                        </div>
                        <div style="margin-top: 10px; font-size: 13px; color: var(--gray);">
                            ëª©í‘œì¼: ${formatDate(g.targetDate)}
                        </div>
                        <button class="btn-danger btn-sm" style="margin-top: 10px;" onclick="deleteGoal(${g.id})">ğŸ—‘ï¸ ì‚­ì œ</button>
                    </div>
                `;
            }).join('');
        }

        function addGoal() {
            const title = document.getElementById('goalTitle').value.trim();
            const target = parseFloat(document.getElementById('goalTarget').value);
            const current = parseFloat(document.getElementById('goalCurrent').value);
            const targetDate = document.getElementById('goalDate').value;

            if (!title || !target || !current || !targetDate) {
                alert('ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”!');
                return;
            }

            appData.goals.push({
                id: Date.now(),
                title, target, current, targetDate
            });

            document.getElementById('goalTitle').value = '';
            document.getElementById('goalTarget').value = '';
            document.getElementById('goalCurrent').value = '';
            document.getElementById('goalDate').value = '';

            saveData();
            renderGoals();
        }

        function deleteGoal(id) {
            if (!confirm('ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
            appData.goals = appData.goals.filter(g => g.id !== id);
            saveData();
            renderGoals();
        }

        // =================
        // ìˆ˜ìµë¥  ë¶„ì„
        // =================
        function updatePerformance() {
            // ë§¤ë§¤ í†µê³„ ê³„ì‚°
            const trades = appData.trades;
            if (trades.length === 0) {
                document.getElementById('winRate').textContent = '0%';
                document.getElementById('avgProfit').textContent = '0%';
                document.getElementById('totalTrades').textContent = '0íšŒ';
                document.getElementById('winTrades').textContent = '0íšŒ';
                document.getElementById('lossTrades').textContent = '0íšŒ';
                return;
            }

            // ê°„ë‹¨í•œ ìŠ¹ë¥  ê³„ì‚° (ì‹¤ì œë¡œëŠ” ë§¤ìˆ˜/ë§¤ë„ ìŒì„ ë§¤ì¹­í•´ì•¼ í•¨)
            const totalTrades = trades.length;
            const winTrades = Math.floor(totalTrades * 0.6); // ì˜ˆì‹œ
            const lossTrades = totalTrades - winTrades;
            const winRate = (winTrades / totalTrades * 100).toFixed(1);

            document.getElementById('totalTrades').textContent = totalTrades + 'íšŒ';
            document.getElementById('winTrades').textContent = winTrades + 'íšŒ';
            document.getElementById('lossTrades').textContent = lossTrades + 'íšŒ';
            document.getElementById('winRate').textContent = winRate + '%';
            document.getElementById('winRateBar').style.width = winRate + '%';
            
            document.getElementById('avgProfit').textContent = '5.2%'; // ì˜ˆì‹œ
            document.getElementById('avgProfitBar').style.width = '52%';
        }

        // =================
        // ì„¸ê¸ˆ ê³„ì‚°
        // =================
        function calculateCapitalGainTax() {
            const sellPrice = parseFloat(document.getElementById('sellPrice').value);
            const buyPrice = parseFloat(document.getElementById('buyPrice').value);
            const holdingPeriod = parseFloat(document.getElementById('holdingPeriod').value);

            if (!sellPrice || !buyPrice || !holdingPeriod) {
                alert('ëª¨ë“  ê°’ì„ ì…ë ¥í•˜ì„¸ìš”!');
                return;
            }

            const profit = sellPrice - buyPrice;
            const taxRate = holdingPeriod >= 1 ? 0.22 : 0.33; // ë‹¨ê¸°/ì¥ê¸°
            const tax = profit * taxRate;
            const netProfit = profit - tax;

            const result = document.getElementById('taxResult');
            result.innerHTML = `
                <div class="item-card">
                    <h4 style="margin-bottom: 15px;">ì–‘ë„ì†Œë“ì„¸ ê³„ì‚° ê²°ê³¼</h4>
                    <div class="item-meta">
                        <span>ì–‘ë„ ì°¨ìµ: <strong>${formatMoney(profit)}</strong></span>
                        <span>ì„¸ìœ¨: <strong>${(taxRate * 100).toFixed(0)}%</strong> (${holdingPeriod >= 1 ? 'ì¥ê¸°' : 'ë‹¨ê¸°'})</span>
                    </div>
                    <div style="margin: 15px 0; padding: 15px; background: var(--light); border-radius: 8px;">
                        <div style="font-size: 14px; color: var(--gray); margin-bottom: 5px;">ë‚©ë¶€ ì„¸ì•¡</div>
                        <div style="font-size: 24px; font-weight: bold; color: var(--danger);">
                            ${formatMoney(tax)}
                        </div>
                    </div>
                    <div style="margin: 15px 0; padding: 15px; background: #d1fae5; border-radius: 8px;">
                        <div style="font-size: 14px; color: var(--gray); margin-bottom: 5px;">ì„¸í›„ ìˆœì´ìµ</div>
                        <div style="font-size: 24px; font-weight: bold; color: var(--success);">
                            ${formatMoney(netProfit)}
                        </div>
                    </div>
                </div>
            `;
        }

        function calculateDividendTax() {
            const dividend = parseFloat(document.getElementById('dividend').value);

            if (!dividend) {
                alert('ë°°ë‹¹ê¸ˆì„ ì…ë ¥í•˜ì„¸ìš”!');
                return;
            }

            const taxRate = 0.154; // 15.4% (ì†Œë“ì„¸ 14% + ì§€ë°©ì„¸ 1.4%)
            const tax = dividend * taxRate;
            const netDividend = dividend - tax;

            const result = document.getElementById('dividendTaxResult');
            result.innerHTML = `
                <div class="item-card">
                    <h4 style="margin-bottom: 15px;">ë°°ë‹¹ì†Œë“ì„¸ ê³„ì‚° ê²°ê³¼</h4>
                    <div class="item-meta">
                        <span>ë°°ë‹¹ê¸ˆ: <strong>${formatMoney(dividend)}</strong></span>
                        <span>ì„¸ìœ¨: <strong>15.4%</strong></span>
                    </div>
                    <div style="margin: 15px 0; padding: 15px; background: var(--light); border-radius: 8px;">
                        <div style="font-size: 14px; color: var(--gray); margin-bottom: 5px;">ì›ì²œì§•ìˆ˜ ì„¸ì•¡</div>
                        <div style="font-size: 24px; font-weight: bold; color: var(--danger);">
                            ${formatMoney(tax)}
                        </div>
                    </div>
                    <div style="margin: 15px 0; padding: 15px; background: #d1fae5; border-radius: 8px;">
                        <div style="font-size: 14px; color: var(--gray); margin-bottom: 5px;">ì„¸í›„ ìˆ˜ë ¹ì•¡</div>
                        <div style="font-size: 24px; font-weight: bold; color: var(--success);">
                            ${formatMoney(netDividend)}
                        </div>
                    </div>
                </div>
            `;
        }

        function calculateYearlyTax() {
            const summary = document.getElementById('yearlyTaxSummary');
            
            // ê°„ë‹¨í•œ ì˜ˆì‹œ (ì‹¤ì œë¡œëŠ” ë§¤ë§¤ ê¸°ë¡ ê¸°ë°˜ ê³„ì‚°)
            const totalProfit = 10000000;
            const totalLoss = 3000000;
            const netProfit = totalProfit - totalLoss;
            const estimatedTax = netProfit * 0.22;

            summary.innerHTML = `
                <div class="item-card">
                    <h4 style="margin-bottom: 15px;">ì—°ê°„ ì†ìµ ì •ì‚° (${new Date().getFullYear()}ë…„)</h4>
                    <div class="item-meta">
                        <span>ì´ ìˆ˜ìµ: <strong class="price-up">+${formatMoney(totalProfit)}</strong></span>
                        <span>ì´ ì†ì‹¤: <strong class="price-down">-${formatMoney(totalLoss)}</strong></span>
                        <span>ìˆœì†ìµ: <strong>${formatMoney(netProfit)}</strong></span>
                    </div>
                    <div style="margin: 15px 0; padding: 15px; background: #fef3c7; border-radius: 8px;">
                        <div style="font-size: 14px; color: var(--gray); margin-bottom: 5px;">ì˜ˆìƒ ì„¸ê¸ˆ</div>
                        <div style="font-size: 24px; font-weight: bold; color: var(--warning);">
                            ì•½ ${formatMoney(estimatedTax)}
                        </div>
                        <div style="font-size: 12px; color: var(--gray); margin-top: 5px;">
                            * ì‹¤ì œ ì„¸ì•¡ì€ ë³´ìœ  ê¸°ê°„, ê³µì œ í•­ëª© ë“±ì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                        </div>
                    </div>
                </div>
            `;
        }

        // =================
        // ëŒ€ì‹œë³´ë“œ ì—…ë°ì´íŠ¸
        // =================
        function updateDashboard() {
            // í¬íŠ¸í´ë¦¬ì˜¤ í†µê³„
            let totalValue = 0;
            let totalCost = 0;

            appData.portfolio.forEach(p => {
                totalValue += p.currentPrice * p.quantity;
                totalCost += p.buyPrice * p.quantity;
            });

            const totalProfit = totalValue - totalCost;
            const totalReturn = totalCost > 0 ? ((totalProfit / totalCost) * 100).toFixed(2) : 0;

            document.getElementById('totalAssets').textContent = formatMoney(totalValue);
            document.getElementById('totalReturn').textContent = totalReturn + '%';
            document.getElementById('returnAmount').textContent = (totalProfit >= 0 ? '+' : '') + formatMoney(totalProfit);
            document.getElementById('stockCount').textContent = appData.portfolio.length + 'ê°œ';

            // ì´ë²ˆ ë‹¬ ë§¤ë§¤
            const thisMonth = new Date().getMonth();
            const monthTrades = appData.trades.filter(t => new Date(t.date).getMonth() === thisMonth);
            document.getElementById('monthTrades').textContent = monthTrades.length + 'íšŒ';
        }

        // =================
        // ë¹ ë¥¸ ë©”ëª¨
        // =================
        function saveQuickMemo() {
            const memo = document.getElementById('quickMemo').value.trim();
            if (!memo) {
                alert('ë©”ëª¨ë¥¼ ì…ë ¥í•˜ì„¸ìš”!');
                return;
            }

            appData.memos.push({
                id: Date.now(),
                content: memo,
                date: new Date().toISOString()
            });

            document.getElementById('quickMemo').value = '';
            saveData();
            alert('ë©”ëª¨ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }

        // =================
        // ë°ì´í„° ê´€ë¦¬
        // =================
        function exportData() {
            const dataStr = JSON.stringify(appData, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `investment-data-${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            URL.revokeObjectURL(url);
        }

        function importData(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const imported = JSON.parse(e.target.result);
                    if (confirm('ê¸°ì¡´ ë°ì´í„°ë¥¼ ëª¨ë‘ ë®ì–´ì“°ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                        appData = imported;
                        saveData();
                        renderAll();
                        alert('ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤!');
                    }
                } catch (error) {
                    alert('íŒŒì¼ í˜•ì‹ì´ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤!');
                }
            };
            reader.readAsText(file);
        }

        // =================
        // ì¢…ëª© ìŠ¤í¬ë¦¬ë„ˆ
        // =================
        
        // ìˆ˜ìµë¥  ë””ìŠ¤í”Œë ˆì´ ì—…ë°ì´íŠ¸
        function updateReturnDisplay() {
            const value = document.getElementById('returnMin').value;
            document.getElementById('returnMinDisplay').textContent = value + '%';
        }

        // ìì—°ì–´ ê²€ìƒ‰
        async function searchByNaturalLanguage() {
            const query = document.getElementById('naturalSearch').value.trim().toLowerCase();
            
            if (!query) {
                alert('ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”!');
                return;
            }

            // ìì—°ì–´ì—ì„œ ì¡°ê±´ ì¶”ì¶œ
            let returnMin = 0;
            let market = 'kospi';
            
            // ìˆ˜ìµë¥  ì¶”ì¶œ
            const returnMatch = query.match(/(\d+)(?:%|í”„ë¡œ|í¼ì„¼íŠ¸)/);
            if (returnMatch) {
                returnMin = parseInt(returnMatch[1]);
                document.getElementById('returnMin').value = returnMin;
                updateReturnDisplay();
            }

            // ì‹œì¥ ì¶”ì¶œ
            if (query.includes('ì½”ìŠ¤í”¼') || query.includes('kospi')) {
                market = 'kospi';
            } else if (query.includes('ì½”ìŠ¤ë‹¥') || query.includes('kosdaq')) {
                market = 'kosdaq';
            } else if (query.includes('ë‚˜ìŠ¤ë‹¥') || query.includes('nasdaq')) {
                market = 'nasdaq';
            } else if (query.includes('ë‰´ìš•') || query.includes('nyse')) {
                market = 'nyse';
            }
            
            document.getElementById('marketSelect').value = market;

            // PER ì¶”ì¶œ
            const perMatch = query.match(/per\s*(\d+)/i);
            if (perMatch) {
                document.getElementById('perMax').value = perMatch[1];
            }

            // PBR ì¶”ì¶œ
            const pbrMatch = query.match(/pbr\s*(\d+)/i);
            if (pbrMatch) {
                document.getElementById('pbrMax').value = pbrMatch[1];
            }

            // ê²€ìƒ‰ ì‹¤í–‰
            await screenStocks();
        }

        // í”„ë¦¬ì…‹ ì ìš©
        function applyPreset(type) {
            // ì´ˆê¸°í™”
            document.getElementById('perMax').value = '';
            document.getElementById('pbrMax').value = '';
            document.getElementById('roeMin').value = '';
            document.getElementById('debtMax').value = '';
            
            if (type === 'growth') {
                // ê³ ì„±ì¥ì£¼
                document.getElementById('returnMin').value = 30;
                document.getElementById('roeMin').value = 15;
                document.getElementById('naturalSearch').value = 'ìˆ˜ìµë¥  30% ì´ìƒ, ROE 15% ì´ìƒì¸ ê³ ì„±ì¥ì£¼';
            } else if (type === 'value') {
                // ê°€ì¹˜ì£¼
                document.getElementById('returnMin').value = 0;
                document.getElementById('perMax').value = 10;
                document.getElementById('pbrMax').value = 1;
                document.getElementById('naturalSearch').value = 'PER 10 ì´í•˜, PBR 1 ì´í•˜ì¸ ì €í‰ê°€ ê°€ì¹˜ì£¼';
            } else if (type === 'safe') {
                // ì•ˆì „ì£¼
                document.getElementById('returnMin').value = 5;
                document.getElementById('roeMin').value = 10;
                document.getElementById('debtMax').value = 50;
                document.getElementById('naturalSearch').value = 'ë¶€ì±„ë¹„ìœ¨ 50% ì´í•˜, ROE 10% ì´ìƒì¸ ì•ˆì „ì£¼';
            }
            
            updateReturnDisplay();
            screenStocks();
        }

        // ì¢…ëª© ìŠ¤í¬ë¦¬ë‹ (ì‹¤ì œ API í˜¸ì¶œ ëŒ€ì‹  ìƒ˜í”Œ ë°ì´í„° ì‚¬ìš©)
        async function screenStocks() {
            const resultsDiv = document.getElementById('screenerResults');
            const loadingDiv = document.getElementById('screenerLoading');
            
            // ì¡°ê±´ ìˆ˜ì§‘
            const market = document.getElementById('marketSelect').value;
            const returnMin = parseFloat(document.getElementById('returnMin').value) || 0;
            const perMax = parseFloat(document.getElementById('perMax').value) || 999;
            const pbrMax = parseFloat(document.getElementById('pbrMax').value) || 999;
            const roeMin = parseFloat(document.getElementById('roeMin').value) || 0;
            const debtMax = parseFloat(document.getElementById('debtMax').value) || 999;
            
            // ë¡œë”© í‘œì‹œ
            loadingDiv.style.display = 'block';
            resultsDiv.innerHTML = '';
            
            // ì‹œë®¬ë ˆì´ì…˜ ì§€ì—° (ì‹¤ì œ API í˜¸ì¶œ ëŠë‚Œ)
            await new Promise(resolve => setTimeout(resolve, 1500));
            
            // ìƒ˜í”Œ ë°ì´í„° (ì‹¤ì œë¡œëŠ” APIì—ì„œ ê°€ì ¸ì˜´)
            const sampleStocks = generateSampleStocks(market);
            
            // í•„í„°ë§
            const filtered = sampleStocks.filter(stock => {
                return stock.return >= returnMin &&
                       stock.per <= perMax &&
                       stock.pbr <= pbrMax &&
                       stock.roe >= roeMin &&
                       stock.debt <= debtMax;
            });
            
            loadingDiv.style.display = 'none';
            
            if (filtered.length === 0) {
                resultsDiv.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">ğŸ˜”</div>
                        <h3>ì¡°ê±´ì— ë§ëŠ” ì¢…ëª©ì´ ì—†ìŠµë‹ˆë‹¤</h3>
                        <p>ì¡°ê±´ì„ ì¡°ê¸ˆ ì™„í™”í•´ë³´ì„¸ìš”</p>
                    </div>
                `;
                return;
            }
            
            // ìˆ˜ìµë¥  ìˆœìœ¼ë¡œ ì •ë ¬
            filtered.sort((a, b) => b.return - a.return);
            
            // ê²°ê³¼ í‘œì‹œ
            resultsDiv.innerHTML = `
                <h3 style="margin-bottom: 20px;">
                    ğŸ¯ ê²€ìƒ‰ ê²°ê³¼: <strong>${filtered.length}ê°œ</strong> ì¢…ëª© ë°œê²¬
                </h3>
                <div class="grid">
                    ${filtered.map(stock => `
                        <div class="item-card" style="border-left: 4px solid ${stock.return >= 20 ? 'var(--success)' : stock.return >= 10 ? 'var(--primary)' : 'var(--warning)'};">
                            <div class="item-header">
                                <div>
                                    <span class="item-title">${stock.name}</span>
                                    <span style="color: var(--gray); margin-left: 10px; font-size: 13px;">${stock.code}</span>
                                </div>
                                <span style="font-size: 20px; font-weight: bold; color: ${stock.return >= 0 ? 'var(--danger)' : 'var(--primary)'}">
                                    ${stock.return >= 0 ? '+' : ''}${stock.return.toFixed(1)}%
                                </span>
                            </div>
                            
                            <div class="item-meta" style="margin-top: 10px;">
                                <span>í˜„ì¬ê°€: ${stock.price.toLocaleString()}ì›</span>
                                <span>ì‹œì´: ${formatMoney(stock.marketCap * 100000000)}</span>
                            </div>
                            
                            <div style="margin-top: 15px; display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px;">
                                <div style="text-align: center; padding: 8px; background: white; border-radius: 6px;">
                                    <div style="font-size: 11px; color: var(--gray);">PER</div>
                                    <div style="font-weight: bold; font-size: 14px;">${stock.per.toFixed(1)}</div>
                                </div>
                                <div style="text-align: center; padding: 8px; background: white; border-radius: 6px;">
                                    <div style="font-size: 11px; color: var(--gray);">PBR</div>
                                    <div style="font-weight: bold; font-size: 14px;">${stock.pbr.toFixed(1)}</div>
                                </div>
                                <div style="text-align: center; padding: 8px; background: white; border-radius: 6px;">
                                    <div style="font-size: 11px; color: var(--gray);">ROE</div>
                                    <div style="font-weight: bold; font-size: 14px;">${stock.roe.toFixed(1)}%</div>
                                </div>
                                <div style="text-align: center; padding: 8px; background: white; border-radius: 6px;">
                                    <div style="font-size: 11px; color: var(--gray);">ë¶€ì±„</div>
                                    <div style="font-weight: bold; font-size: 14px;">${stock.debt.toFixed(0)}%</div>
                                </div>
                            </div>
                            
                            <div style="margin-top: 15px; display: flex; gap: 10px;">
                                <button class="btn-success btn-sm" onclick="addToWatchlistFromScreener('${stock.name}', '${stock.code}', ${stock.price})" style="flex: 1;">
                                    ğŸ‘€ ê´€ì‹¬ ì¢…ëª© ì¶”ê°€
                                </button>
                                <button class="btn-primary btn-sm" onclick="addToPortfolioFromScreener('${stock.name}', '${stock.code}', ${stock.price})" style="flex: 1;">
                                    ğŸ’¼ í¬íŠ¸í´ë¦¬ì˜¤ ì¶”ê°€
                                </button>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        // ìƒ˜í”Œ ë°ì´í„° ìƒì„±
        function generateSampleStocks(market) {
            const kospiStocks = [
                { name: 'ì‚¼ì„±ì „ì', code: '005930', price: 71200, marketCap: 4254, return: 12.5, per: 18.2, pbr: 1.4, roe: 11.8, debt: 45 },
                { name: 'SKí•˜ì´ë‹‰ìŠ¤', code: '000660', price: 142500, marketCap: 1038, return: 45.2, per: 12.5, pbr: 2.1, roe: 18.5, debt: 38 },
                { name: 'LGì—ë„ˆì§€ì†”ë£¨ì…˜', code: '373220', price: 385000, marketCap: 895, return: -8.3, per: 25.4, pbr: 3.2, roe: 8.2, debt: 52 },
                { name: 'NAVER', code: '035420', price: 185000, marketCap: 304, return: 22.1, per: 28.5, pbr: 2.8, roe: 12.4, debt: 28 },
                { name: 'ì¹´ì¹´ì˜¤', code: '035720', price: 42500, marketCap: 185, return: -15.2, per: 35.2, pbr: 1.9, roe: 5.8, debt: 42 },
                { name: 'í˜„ëŒ€ì°¨', code: '005380', price: 245000, marketCap: 524, return: 38.5, per: 6.8, pbr: 0.7, roe: 15.2, debt: 65 },
                { name: 'KBê¸ˆìœµ', code: '105560', price: 68500, marketCap: 282, return: 18.4, per: 5.2, pbr: 0.5, roe: 11.5, debt: 125 },
                { name: 'ì…€íŠ¸ë¦¬ì˜¨', code: '068270', price: 165000, marketCap: 221, return: 5.2, per: 22.1, pbr: 3.1, roe: 9.8, debt: 35 },
                { name: 'ì‚¼ì„±SDI', code: '006400', price: 385000, marketCap: 265, return: -12.5, per: 18.5, pbr: 2.2, roe: 8.5, debt: 48 },
                { name: 'POSCOí™€ë”©ìŠ¤', code: '005490', price: 385000, marketCap: 325, return: 28.5, per: 8.2, pbr: 0.9, roe: 14.2, debt: 72 }
            ];

            const nasdaqStocks = [
                { name: 'Apple', code: 'AAPL', price: 195, marketCap: 30000, return: 48.2, per: 32.5, pbr: 45.2, roe: 147.5, debt: 18 },
                { name: 'Microsoft', code: 'MSFT', price: 415, marketCap: 30800, return: 52.8, per: 38.2, pbr: 12.5, roe: 42.8, debt: 25 },
                { name: 'NVIDIA', code: 'NVDA', price: 880, marketCap: 21700, return: 238.5, per: 75.2, pbr: 52.8, roe: 115.2, debt: 12 },
                { name: 'Tesla', code: 'TSLA', price: 257, marketCap: 8200, return: -18.5, per: 82.5, pbr: 15.2, roe: 28.5, debt: 8 },
                { name: 'Meta', code: 'META', price: 485, marketCap: 12400, return: 182.5, per: 28.5, pbr: 8.2, roe: 35.2, debt: 5 },
                { name: 'Amazon', code: 'AMZN', price: 175, marketCap: 18100, return: 78.5, per: 68.2, pbr: 8.5, roe: 18.2, debt: 15 },
                { name: 'Alphabet', code: 'GOOGL', price: 155, marketCap: 19500, return: 58.2, per: 28.5, pbr: 6.8, roe: 28.5, debt: 8 },
                { name: 'Netflix', code: 'NFLX', price: 625, marketCap: 2700, return: 62.5, per: 45.2, pbr: 8.5, roe: 32.5, debt: 22 }
            ];

            if (market === 'kospi' || market === 'kosdaq') {
                return kospiStocks;
            } else {
                return nasdaqStocks;
            }
        }

        // ìŠ¤í¬ë¦¬ë„ˆì—ì„œ ê´€ì‹¬ ì¢…ëª© ì¶”ê°€
        function addToWatchlistFromScreener(name, code, price) {
            // ì¤‘ë³µ ì²´í¬
            if (appData.watchlist.find(s => s.code === code)) {
                alert('ì´ë¯¸ ê´€ì‹¬ ì¢…ëª©ì— ì¶”ê°€ë˜ì–´ ìˆìŠµë‹ˆë‹¤!');
                return;
            }

            appData.watchlist.push({
                id: Date.now(),
                name: name,
                code: code,
                price: price,
                targetPrice: Math.round(price * 1.2), // 20% ëª©í‘œê°€
                memo: 'ìŠ¤í¬ë¦¬ë„ˆì—ì„œ ì¶”ê°€ëœ ì¢…ëª©',
                lastUpdate: new Date().toISOString()
            });

            saveData();
            alert(`âœ… ${name}ì´(ê°€) ê´€ì‹¬ ì¢…ëª©ì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!`);
        }

        // ìŠ¤í¬ë¦¬ë„ˆì—ì„œ í¬íŠ¸í´ë¦¬ì˜¤ ì¶”ê°€
        function addToPortfolioFromScreener(name, code, price) {
            // ê´€ì‹¬ ì¢…ëª© íƒ­ìœ¼ë¡œ ì´ë™
            showSection('portfolio');
            document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
            document.querySelector('[onclick*="portfolio"]').classList.add('active');

            // í¼ì— ìë™ ì…ë ¥
            document.getElementById('portStockName').value = name;
            document.getElementById('portStockCode').value = code;
            document.getElementById('portCurrentPrice').value = price;
            
            // ìˆ˜ëŸ‰ ì…ë ¥ë€ìœ¼ë¡œ í¬ì»¤ìŠ¤
            document.getElementById('portQuantity').focus();
            
            alert(`ì¢…ëª© ì •ë³´ê°€ ì…ë ¥ë˜ì—ˆìŠµë‹ˆë‹¤. ìˆ˜ëŸ‰ê³¼ ë§¤ìˆ˜ê°€ë¥¼ ì…ë ¥í•˜ì„¸ìš”!`);
        }

        // =================
        // ë§ˆì¸ë“œ ì»¨íŠ¸ë¡¤
        // =================
        
        // ì‹¬ë¦¬ ìƒíƒœ ë°” ì—…ë°ì´íŠ¸
        function updateMindsetBar(type, value) {
            document.getElementById(type + 'Value').textContent = value;
            
            // ì¡°ì–¸ ì—…ë°ì´íŠ¸
            const fear = parseInt(document.getElementById('fearLevel').value);
            const greed = parseInt(document.getElementById('greedLevel').value);
            const confidence = parseInt(document.getElementById('confidenceLevel').value);
            const stress = parseInt(document.getElementById('stressLevel').value);
            
            let advice = '';
            let color = 'var(--success)';
            
            if (fear > 7) {
                advice = 'âš ï¸ ê³µí¬ ìˆ˜ì¤€ì´ ë†’ìŠµë‹ˆë‹¤. ì‹œì¥ì´ ê³¼ë„í•˜ê²Œ ë‘ë ¤ìš´ ìƒíƒœì…ë‹ˆë‹¤. ì›ì¹™ì„ ë‹¤ì‹œ í™•ì¸í•˜ê³ , ê°ì •ì´ ì•„ë‹Œ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ íŒë‹¨í•˜ì„¸ìš”.';
                color = 'var(--danger)';
            } else if (greed > 7) {
                advice = 'âš ï¸ íƒìš• ìˆ˜ì¤€ì´ ë†’ìŠµë‹ˆë‹¤. ê³¼ë„í•œ ìˆ˜ìµ ìš•ì‹¬ì´ í° ì†ì‹¤ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëª©í‘œ ìˆ˜ìµë¥ ì„ ë‹¤ì‹œ í™•ì¸í•˜ê³  ë¶„ì‚° íˆ¬ìí•˜ì„¸ìš”.';
                color = 'var(--warning)';
            } else if (stress > 7) {
                advice = 'âš ï¸ ìŠ¤íŠ¸ë ˆìŠ¤ê°€ ë†’ìŠµë‹ˆë‹¤. ì ì‹œ íˆ¬ìì—ì„œ ë²—ì–´ë‚˜ íœ´ì‹ì„ ì·¨í•˜ì„¸ìš”. ê±´ê°•ì´ ê°€ì¥ ì¤‘ìš”í•©ë‹ˆë‹¤.';
                color = 'var(--danger)';
            } else if (confidence < 3) {
                advice = 'ğŸ’¡ ìì‹ ê°ì´ ë‚®ìŠµë‹ˆë‹¤. íˆ¬ì ì›ì¹™ì„ ì¬ì ê²€í•˜ê³ , ì‘ì€ ê¸ˆì•¡ìœ¼ë¡œ ì‹œì‘í•´ë³´ì„¸ìš”. ì„±ê³µ ê²½í—˜ì„ ìŒ“ìœ¼ë©´ ìì‹ ê°ì´ íšŒë³µë©ë‹ˆë‹¤.';
                color = 'var(--primary)';
            } else if (fear < 3 && greed < 3 && stress < 4 && confidence > 6) {
                advice = 'âœ… ì¢‹ì€ ì‹¬ë¦¬ ìƒíƒœì…ë‹ˆë‹¤! ê· í˜•ì¡íŒ ë§ˆìŒê°€ì§ì„ ìœ ì§€í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ ìƒíƒœë¥¼ ê¸°ì–µí•˜ì„¸ìš”.';
                color = 'var(--success)';
            } else {
                advice = 'ğŸ’¡ ë³´í†µ ìˆ˜ì¤€ì˜ ì‹¬ë¦¬ ìƒíƒœì…ë‹ˆë‹¤. íˆ¬ì ì›ì¹™ì„ ì§€í‚¤ë©° ê°ì • ê´€ë¦¬ì— ì‹ ê²½ì“°ì„¸ìš”.';
                color = 'var(--primary)';
            }
            
            document.getElementById('mindsetAdvice').innerHTML = `
                <div style="padding: 15px; background: var(--light); border-radius: 8px; border-left: 4px solid ${color};">
                    <p style="line-height: 1.6; color: var(--dark);">${advice}</p>
                </div>
            `;
        }

        // ì‹¬ë¦¬ ìƒíƒœ ê¸°ë¡
        function saveMindsetCheck() {
            const fear = parseInt(document.getElementById('fearLevel').value);
            const greed = parseInt(document.getElementById('greedLevel').value);
            const confidence = parseInt(document.getElementById('confidenceLevel').value);
            const stress = parseInt(document.getElementById('stressLevel').value);
            
            appData.mindsetChecks.push({
                id: Date.now(),
                date: new Date().toISOString(),
                fear, greed, confidence, stress
            });
            
            saveData();
            updateMindsetChart();
            alert('ì‹¬ë¦¬ ìƒíƒœê°€ ê¸°ë¡ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }

        // ê°ì • ì¼ê¸°
        function renderEmotionDiary() {
            const container = document.getElementById('emotionDiaryList');
            if (!container) return;
            
            if (appData.emotionDiary.length === 0) {
                container.innerHTML = '<p style="color: var(--gray); text-align: center; padding: 20px;">ì•„ì§ ì‘ì„±í•œ ì¼ê¸°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }
            
            const emotionEmojis = {
                happy: 'ğŸ˜Š',
                sad: 'ğŸ˜¢',
                anxious: 'ğŸ˜°',
                regret: 'ğŸ˜”',
                confident: 'ğŸ˜',
                confused: 'ğŸ˜•'
            };
            
            container.innerHTML = appData.emotionDiary.slice(0, 5).map(e => `
                <div class="item-card" style="margin-bottom: 10px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                        <span style="font-size: 24px;">${emotionEmojis[e.type]}</span>
                        <span style="font-size: 12px; color: var(--gray);">${formatDate(e.date)}</span>
                    </div>
                    <p style="font-size: 14px; line-height: 1.6;">${e.content}</p>
                </div>
            `).join('');
        }

        function addEmotionDiary() {
            const type = document.getElementById('emotionType').value;
            const content = document.getElementById('emotionContent').value.trim();
            
            if (!content) {
                alert('ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”!');
                return;
            }
            
            appData.emotionDiary.unshift({
                id: Date.now(),
                date: new Date().toISOString(),
                type, content
            });
            
            document.getElementById('emotionContent').value = '';
            saveData();
            renderEmotionDiary();
        }

        // ì‹¤ìˆ˜ ë…¸íŠ¸
        function renderMistakes() {
            const container = document.getElementById('mistakesList');
            if (!container) return;
            
            if (appData.mistakes.length === 0) {
                container.innerHTML = '<p style="color: var(--gray); text-align: center; padding: 20px;">ê¸°ë¡ëœ ì‹¤ìˆ˜ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }
            
            const mistakeLabels = {
                emotional: 'ê°ì •ì  ë§¤ë§¤',
                noplan: 'ê³„íš ì—†ëŠ” ë§¤ë§¤',
                overleveraged: 'ê³¼ë„í•œ ë ˆë²„ë¦¬ì§€',
                fomo: 'FOMO',
                cutloss: 'ì†ì ˆ ì‹¤íŒ¨',
                overtrading: 'ê³¼ë„í•œ ë§¤ë§¤',
                other: 'ê¸°íƒ€'
            };
            
            container.innerHTML = appData.mistakes.slice(0, 3).map(m => `
                <div class="item-card" style="margin-bottom: 10px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <span class="badge badge-danger">${mistakeLabels[m.type]}</span>
                        <span style="font-size: 12px; color: var(--gray);">${formatDate(m.date)}</span>
                    </div>
                    <div style="margin-bottom: 10px;">
                        <strong style="font-size: 13px; color: var(--dark);">ì‹¤ìˆ˜:</strong>
                        <p style="font-size: 14px; margin-top: 5px;">${m.content}</p>
                    </div>
                    <div style="background: #fef3c7; padding: 10px; border-radius: 6px;">
                        <strong style="font-size: 13px; color: var(--warning);">ë°°ìš´ ì :</strong>
                        <p style="font-size: 14px; margin-top: 5px;">${m.lesson}</p>
                    </div>
                </div>
            `).join('');
        }

        function addMistake() {
            const type = document.getElementById('mistakeType').value;
            const content = document.getElementById('mistakeContent').value.trim();
            const lesson = document.getElementById('mistakeLesson').value.trim();
            
            if (!content || !lesson) {
                alert('ëª¨ë“  í•­ëª©ì„ ì…ë ¥í•˜ì„¸ìš”!');
                return;
            }
            
            appData.mistakes.unshift({
                id: Date.now(),
                date: new Date().toISOString(),
                type, content, lesson
            });
            
            document.getElementById('mistakeContent').value = '';
            document.getElementById('mistakeLesson').value = '';
            saveData();
            renderMistakes();
        }

        // ì„±ê³µ ì‚¬ë¡€
        function renderSuccesses() {
            const container = document.getElementById('successList');
            if (!container) return;
            
            if (appData.successes.length === 0) {
                container.innerHTML = '<p style="color: var(--gray); text-align: center; padding: 20px;">ê¸°ë¡ëœ ì„±ê³µì´ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }
            
            const successLabels = {
                patience: 'ì¸ë‚´ì‹¬ ë°œíœ˜',
                discipline: 'ì›ì¹™ ì¤€ìˆ˜',
                research: 'ì² ì €í•œ ë¶„ì„',
                timing: 'ì ì ˆí•œ íƒ€ì´ë°',
                cutloss: 'ë¹ ë¥¸ ì†ì ˆ',
                other: 'ê¸°íƒ€'
            };
            
            container.innerHTML = appData.successes.slice(0, 3).map(s => `
                <div class="item-card" style="margin-bottom: 10px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <span class="badge badge-success">${successLabels[s.type]}</span>
                        <span style="font-size: 12px; color: var(--gray);">${formatDate(s.date)}</span>
                    </div>
                    <div style="margin-bottom: 10px;">
                        <strong style="font-size: 13px; color: var(--dark);">ì„±ê³µ:</strong>
                        <p style="font-size: 14px; margin-top: 5px;">${s.content}</p>
                    </div>
                    <div style="background: #d1fae5; padding: 10px; border-radius: 6px;">
                        <strong style="font-size: 13px; color: var(--success);">ì„±ê³µ ìš”ì¸:</strong>
                        <p style="font-size: 14px; margin-top: 5px;">${s.reason}</p>
                    </div>
                </div>
            `).join('');
        }

        function addSuccess() {
            const type = document.getElementById('successType').value;
            const content = document.getElementById('successContent').value.trim();
            const reason = document.getElementById('successReason').value.trim();
            
            if (!content || !reason) {
                alert('ëª¨ë“  í•­ëª©ì„ ì…ë ¥í•˜ì„¸ìš”!');
                return;
            }
            
            appData.successes.unshift({
                id: Date.now(),
                date: new Date().toISOString(),
                type, content, reason
            });
            
            document.getElementById('successContent').value = '';
            document.getElementById('successReason').value = '';
            saveData();
            renderSuccesses();
        }

        // ëª…ì–¸
        function renderQuotes() {
            const container = document.getElementById('quotesList');
            if (!container) return;
            
            if (appData.quotes.length === 0) {
                container.innerHTML = `
                    <div class="item-card">
                        <p style="font-style: italic; color: var(--gray); text-align: center;">
                            "ì‹œì¥ì€ ëˆì„ ì¡°ê¸‰í•œ ì‚¬ëŒì—ê²Œì„œ ì¸ë‚´ì‹¬ ìˆëŠ” ì‚¬ëŒì—ê²Œë¡œ ì˜®ê¸°ëŠ” ì¥ì¹˜ë‹¤." - ì›Œë Œ ë²„í•
                        </p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = appData.quotes.map(q => `
                <div class="item-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                    <p style="font-size: 16px; line-height: 1.8; font-style: italic;">
                        "${q.content}"
                    </p>
                    <div style="text-align: right; margin-top: 10px; font-size: 12px; opacity: 0.9;">
                        ${formatDate(q.date)}
                    </div>
                    <button class="btn-danger btn-sm" style="margin-top: 10px;" onclick="deleteQuote(${q.id})">ì‚­ì œ</button>
                </div>
            `).join('');
        }

        function addQuote() {
            const content = document.getElementById('quoteContent').value.trim();
            
            if (!content) {
                alert('ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”!');
                return;
            }
            
            appData.quotes.unshift({
                id: Date.now(),
                date: new Date().toISOString(),
                content
            });
            
            document.getElementById('quoteContent').value = '';
            saveData();
            renderQuotes();
        }

        function deleteQuote(id) {
            if (!confirm('ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
            appData.quotes = appData.quotes.filter(q => q.id !== id);
            saveData();
            renderQuotes();
        }

        // ì‹¬ë¦¬ ì°¨íŠ¸
        function updateMindsetChart() {
            const ctx = document.getElementById('mindsetChart');
            if (!ctx) return;
            
            const recentChecks = appData.mindsetChecks.slice(-7);
            
            if (mindsetChart) {
                mindsetChart.destroy();
            }
            
            mindsetChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: recentChecks.map(c => formatDate(c.date)),
                    datasets: [
                        {
                            label: 'ê³µí¬',
                            data: recentChecks.map(c => c.fear),
                            borderColor: 'rgb(239, 68, 68)',
                            backgroundColor: 'rgba(239, 68, 68, 0.1)',
                            tension: 0.4
                        },
                        {
                            label: 'íƒìš•',
                            data: recentChecks.map(c => c.greed),
                            borderColor: 'rgb(245, 158, 11)',
                            backgroundColor: 'rgba(245, 158, 11, 0.1)',
                            tension: 0.4
                        },
                        {
                            label: 'ìì‹ ê°',
                            data: recentChecks.map(c => c.confidence),
                            borderColor: 'rgb(16, 185, 129)',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            tension: 0.4
                        },
                        {
                            label: 'ìŠ¤íŠ¸ë ˆìŠ¤',
                            data: recentChecks.map(c => c.stress),
                            borderColor: 'rgb(139, 92, 246)',
                            backgroundColor: 'rgba(139, 92, 246, 0.1)',
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 10
                        }
                    }
                }
            });
        }

        // =================
        // ê³„ì • ê´€ë¦¬
        // =================
        
        // ê³„ì • ì •ë³´ í‘œì‹œ
        function renderAccountInfo() {
            if (!currentUser) return;
            
            const users = getUsersData();
            const userInfo = users[currentUser];
            
            document.getElementById('accountUsername').textContent = currentUser;
            
            if (userInfo && userInfo.createdAt) {
                const created = new Date(userInfo.createdAt);
                document.getElementById('accountCreated').textContent = 
                    `${created.getFullYear()}.${String(created.getMonth() + 1).padStart(2, '0')}.${String(created.getDate()).padStart(2, '0')}`;
            }
            
            // ë°ì´í„° ê°œìˆ˜ ì—…ë°ì´íŠ¸
            updateDataCounts();
        }

        // ë°ì´í„° ê°œìˆ˜ ì—…ë°ì´íŠ¸
        function updateDataCounts() {
            const total = 
                appData.principles.length +
                appData.watchlist.length +
                appData.portfolio.length +
                appData.trades.length +
                appData.analysis.length +
                appData.goals.length +
                appData.emotionDiary.length +
                appData.mistakes.length +
                appData.successes.length +
                appData.quotes.length;
            
            document.getElementById('totalDataCount').textContent = total + 'ê°œ';
            document.getElementById('principlesCount').textContent = appData.principles.length;
            document.getElementById('watchlistCount').textContent = appData.watchlist.length;
            document.getElementById('portfolioCount').textContent = appData.portfolio.length;
            document.getElementById('tradesCount').textContent = appData.trades.length;
            document.getElementById('analysisCount').textContent = appData.analysis.length;
            document.getElementById('emotionCount').textContent = appData.emotionDiary.length;
            
            // í†µê³„
            document.getElementById('statPrinciples').textContent = appData.principles.length + 'ê°œ';
            document.getElementById('statTrades').textContent = appData.trades.length + 'íšŒ';
            document.getElementById('statDiary').textContent = appData.emotionDiary.length + 'ê°œ';
            document.getElementById('statAnalysis').textContent = appData.analysis.length + 'ê°œ';
        }

        // ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
        function changePassword() {
            const currentPw = document.getElementById('currentPassword').value;
            const newPw = document.getElementById('newPassword').value;
            const newPwConfirm = document.getElementById('newPasswordConfirm').value;
            const resultDiv = document.getElementById('passwordChangeResult');
            
            if (!currentPw || !newPw || !newPwConfirm) {
                resultDiv.innerHTML = '<div style="padding: 10px; background: #fee2e2; color: var(--danger); border-radius: 8px;">ëª¨ë“  í•­ëª©ì„ ì…ë ¥í•˜ì„¸ìš”.</div>';
                return;
            }
            
            const users = getUsersData();
            
            if (users[currentUser].password !== currentPw) {
                resultDiv.innerHTML = '<div style="padding: 10px; background: #fee2e2; color: var(--danger); border-radius: 8px;">í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</div>';
                return;
            }
            
            if (newPw.length < 6) {
                resultDiv.innerHTML = '<div style="padding: 10px; background: #fee2e2; color: var(--danger); border-radius: 8px;">ìƒˆ ë¹„ë°€ë²ˆí˜¸ëŠ” 6ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.</div>';
                return;
            }
            
            if (newPw !== newPwConfirm) {
                resultDiv.innerHTML = '<div style="padding: 10px; background: #fee2e2; color: var(--danger); border-radius: 8px;">ìƒˆ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</div>';
                return;
            }
            
            users[currentUser].password = newPw;
            saveUsersData(users);
            
            document.getElementById('currentPassword').value = '';
            document.getElementById('newPassword').value = '';
            document.getElementById('newPasswordConfirm').value = '';
            
            resultDiv.innerHTML = '<div style="padding: 10px; background: #d1fae5; color: var(--success); border-radius: 8px;">âœ… ë¹„ë°€ë²ˆí˜¸ê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤!</div>';
            
            setTimeout(() => {
                resultDiv.innerHTML = '';
            }, 3000);
        }

        // ë°ì´í„° ë‚´ë³´ë‚´ê¸° (ì‚¬ìš©ìë³„)
        function exportUserData() {
            const dataStr = JSON.stringify(appData, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `investment-backup-${currentUser}-${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            URL.revokeObjectURL(url);
            
            alert('âœ… ë°ì´í„°ê°€ ë°±ì—…ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }

        // ë°ì´í„° ê°€ì ¸ì˜¤ê¸° (ì‚¬ìš©ìë³„)
        function importUserData(event) {
            const file = event.target.files[0];
            if (!file) return;

            if (!confirm('í˜„ì¬ ë°ì´í„°ë¥¼ ëª¨ë‘ ë®ì–´ì“°ì‹œê² ìŠµë‹ˆê¹Œ?\nê¸°ì¡´ ë°ì´í„°ëŠ” ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤!')) {
                event.target.value = '';
                return;
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const imported = JSON.parse(e.target.result);
                    appData = imported;
                    saveUserData();
                    renderAll();
                    updateDataCounts();
                    alert('âœ… ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤!');
                } catch (error) {
                    alert('âŒ íŒŒì¼ í˜•ì‹ì´ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤!');
                }
                event.target.value = '';
            };
            reader.readAsText(file);
        }

        // ëª¨ë“  ë°ì´í„° ì‚­ì œ
        function clearAllData() {
            if (!confirm('âš ï¸ ì •ë§ë¡œ ëª¨ë“  ë°ì´í„°ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\nì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!')) {
                return;
            }
            
            if (!confirm('â— ë§ˆì§€ë§‰ í™•ì¸:\nì •ë§ë¡œ ëª¨ë“  íˆ¬ì ì›ì¹™, ì¢…ëª©, ë§¤ë§¤ ê¸°ë¡ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                return;
            }
            
            appData = {
                principles: [],
                watchlist: [],
                portfolio: [],
                trades: [],
                analysis: [],
                goals: [],
                memos: [],
                mindsetChecks: [],
                emotionDiary: [],
                mistakes: [],
                successes: [],
                quotes: []
            };
            
            saveUserData();
            renderAll();
            updateDataCounts();
            
            alert('ğŸ—‘ï¸ ëª¨ë“  ë°ì´í„°ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        // ê³„ì • ì‚­ì œ
        function deleteAccount() {
            if (!confirm('âš ï¸ ì •ë§ë¡œ ê³„ì •ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\nëª¨ë“  ë°ì´í„°ê°€ ì˜êµ¬ì ìœ¼ë¡œ ì‚­ì œë©ë‹ˆë‹¤!')) {
                return;
            }
            
            const confirmText = prompt('ê³„ì •ì„ ì‚­ì œí•˜ë ¤ë©´ ì‚¬ìš©ì ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”:\n\n' + currentUser);
            
            if (confirmText !== currentUser) {
                alert('ì‚¬ìš©ì ì´ë¦„ì´ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                return;
            }
            
            // ì‚¬ìš©ì ë°ì´í„° ì‚­ì œ
            const userDataKey = `investmentData_${currentUser}`;
            localStorage.removeItem(userDataKey);
            
            // ì‚¬ìš©ì ê³„ì • ì‚­ì œ
            const users = getUsersData();
            delete users[currentUser];
            saveUsersData(users);
            
            alert('ğŸ‘‹ ê³„ì •ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤. ì´ìš©í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.');
            
            // ë¡œê·¸ì•„ì›ƒ
            currentUser = null;
            sessionStorage.removeItem('currentUser');
            appData = {
                principles: [],
                watchlist: [],
                portfolio: [],
                trades: [],
                analysis: [],
                goals: [],
                memos: [],
                mindsetChecks: [],
                emotionDiary: [],
                mistakes: [],
                successes: [],
                quotes: []
            };
            
            renderAll();
            showLoginModal();
        }

        // ì„¤ì • ì €ì¥
        function saveSettings() {
            const settings = {
                notifyGoals: document.getElementById('notifyGoals').checked,
                notifyMindset: document.getElementById('notifyMindset').checked,
                notifyBackup: document.getElementById('notifyBackup').checked,
                chartPeriod: document.getElementById('chartPeriod').value,
                currency: document.getElementById('currency').value
            };
            
            const settingsKey = `settings_${currentUser}`;
            localStorage.setItem(settingsKey, JSON.stringify(settings));
            
            const resultDiv = document.getElementById('settingsResult');
            resultDiv.innerHTML = '<div style="padding: 10px; background: #d1fae5; color: var(--success); border-radius: 8px;">âœ… ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!</div>';
            
            setTimeout(() => {
                resultDiv.innerHTML = '';
            }, 3000);
        }

        // ì„¤ì • ë¶ˆëŸ¬ì˜¤ê¸°
        function loadSettings() {
            if (!currentUser) return;
            
            const settingsKey = `settings_${currentUser}`;
            const saved = localStorage.getItem(settingsKey);
            
            if (saved) {
                const settings = JSON.parse(saved);
                document.getElementById('notifyGoals').checked = settings.notifyGoals !== false;
                document.getElementById('notifyMindset').checked = settings.notifyMindset !== false;
                document.getElementById('notifyBackup').checked = settings.notifyBackup !== false;
                document.getElementById('chartPeriod').value = settings.chartPeriod || '6m';
                document.getElementById('currency').value = settings.currency || 'KRW';
            }
        }

        // =================
        // ê³„ì • ê´€ë¦¬
        // =================
        
        // ê³„ì • ì •ë³´ ì—…ë°ì´íŠ¸
        function updateAccountInfo() {
            if (!currentUser) return;
            
            const users = getUsersData();
            const userInfo = users[currentUser];
            
            if (!userInfo) return;
            
            // ê³„ì • ì •ë³´ í‘œì‹œ
            document.getElementById('accountUsername').textContent = currentUser;
            
            if (userInfo.createdAt) {
                const date = new Date(userInfo.createdAt);
                document.getElementById('accountCreatedAt').textContent = 
                    `ê°€ì…ì¼: ${date.getFullYear()}.${String(date.getMonth() + 1).padStart(2, '0')}.${String(date.getDate()).padStart(2, '0')}`;
            }
            
            // í†µê³„ ì—…ë°ì´íŠ¸
            document.getElementById('principlesCount').textContent = appData.principles.length;
            document.getElementById('watchlistCount').textContent = appData.watchlist.length;
            document.getElementById('portfolioCount').textContent = appData.portfolio.length;
            document.getElementById('tradesCount').textContent = appData.trades.length;
            document.getElementById('analysisCount').textContent = appData.analysis.length;
            document.getElementById('goalsCount').textContent = appData.goals.length;
            
            // ì‚¬ìš© í†µê³„
            updateUsageStats();
        }

        // ì‚¬ìš© í†µê³„
        function updateUsageStats() {
            const statsDiv = document.getElementById('usageStats');
            if (!statsDiv) return;
            
            // ì´ íˆ¬ìì•¡
            let totalInvestment = 0;
            appData.portfolio.forEach(p => {
                totalInvestment += p.buyPrice * p.quantity;
            });
            
            // ë§¤ë§¤ íšŸìˆ˜
            const buyCount = appData.trades.filter(t => t.type === 'buy').length;
            const sellCount = appData.trades.filter(t => t.type === 'sell').length;
            
            // ê°€ì¥ ìµœê·¼ í™œë™
            let lastActivity = '-';
            const allDates = [
                ...appData.trades.map(t => t.date),
                ...appData.principles.map(p => p.id),
                ...appData.watchlist.map(w => w.id)
            ].filter(d => d);
            
            if (allDates.length > 0) {
                const latest = new Date(Math.max(...allDates.map(d => new Date(d).getTime())));
                lastActivity = formatDate(latest.toISOString());
            }
            
            statsDiv.innerHTML = `
                <div class="grid grid-4">
                    <div style="text-align: center; padding: 20px; background: var(--light); border-radius: 10px;">
                        <div style="font-size: 13px; color: var(--gray); margin-bottom: 5px;">ì´ íˆ¬ìì•¡</div>
                        <div style="font-size: 22px; font-weight: bold;">${formatMoney(totalInvestment)}</div>
                    </div>
                    <div style="text-align: center; padding: 20px; background: var(--light); border-radius: 10px;">
                        <div style="font-size: 13px; color: var(--gray); margin-bottom: 5px;">ë§¤ìˆ˜</div>
                        <div style="font-size: 22px; font-weight: bold; color: var(--danger);">${buyCount}íšŒ</div>
                    </div>
                    <div style="text-align: center; padding: 20px; background: var(--light); border-radius: 10px;">
                        <div style="font-size: 13px; color: var(--gray); margin-bottom: 5px;">ë§¤ë„</div>
                        <div style="font-size: 22px; font-weight: bold; color: var(--primary);">${sellCount}íšŒ</div>
                    </div>
                    <div style="text-align: center; padding: 20px; background: var(--light); border-radius: 10px;">
                        <div style="font-size: 13px; color: var(--gray); margin-bottom: 5px;">ìµœê·¼ í™œë™</div>
                        <div style="font-size: 18px; font-weight: bold;">${lastActivity}</div>
                    </div>
                </div>
                
                <div style="margin-top: 20px; padding: 20px; background: var(--light); border-radius: 10px;">
                    <h4 style="margin-bottom: 15px;">ğŸ“ˆ ë°ì´í„° í˜„í™©</h4>
                    <div style="display: flex; flex-direction: column; gap: 10px;">
                        <div style="display: flex; justify-content: space-between; padding: 10px; background: white; border-radius: 6px;">
                            <span>íˆ¬ì ì›ì¹™</span>
                            <strong>${appData.principles.length}ê°œ</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 10px; background: white; border-radius: 6px;">
                            <span>ê´€ì‹¬ ì¢…ëª©</span>
                            <strong>${appData.watchlist.length}ê°œ</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 10px; background: white; border-radius: 6px;">
                            <span>ë³´ìœ  ì¢…ëª©</span>
                            <strong>${appData.portfolio.length}ê°œ</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 10px; background: white; border-radius: 6px;">
                            <span>ë§¤ë§¤ ê¸°ë¡</span>
                            <strong>${appData.trades.length}ê°œ</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 10px; background: white; border-radius: 6px;">
                            <span>ì¢…ëª© ë¶„ì„</span>
                            <strong>${appData.analysis.length}ê°œ</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between; padding: 10px; background: white; border-radius: 6px;">
                            <span>ê°ì • ì¼ê¸°</span>
                            <strong>${appData.emotionDiary ? appData.emotionDiary.length : 0}ê°œ</strong>
                        </div>
                    </div>
                </div>
            `;
        }

        // ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
        function changePassword() {
            const current = document.getElementById('currentPassword').value;
            const newPw = document.getElementById('newPassword').value;
            const newPwConfirm = document.getElementById('newPasswordConfirm').value;
            const resultDiv = document.getElementById('passwordChangeResult');
            
            if (!current || !newPw || !newPwConfirm) {
                resultDiv.innerHTML = '<div style="padding: 10px; background: #fee2e2; color: var(--danger); border-radius: 8px;">ëª¨ë“  í•„ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”.</div>';
                return;
            }
            
            if (newPw.length < 6) {
                resultDiv.innerHTML = '<div style="padding: 10px; background: #fee2e2; color: var(--danger); border-radius: 8px;">ìƒˆ ë¹„ë°€ë²ˆí˜¸ëŠ” 6ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.</div>';
                return;
            }
            
            if (newPw !== newPwConfirm) {
                resultDiv.innerHTML = '<div style="padding: 10px; background: #fee2e2; color: var(--danger); border-radius: 8px;">ìƒˆ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</div>';
                return;
            }
            
            const users = getUsersData();
            
            if (users[currentUser].password !== current) {
                resultDiv.innerHTML = '<div style="padding: 10px; background: #fee2e2; color: var(--danger); border-radius: 8px;">í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.</div>';
                return;
            }
            
            // ë¹„ë°€ë²ˆí˜¸ ë³€ê²½
            users[currentUser].password = newPw;
            saveUsersData(users);
            
            // í¼ ì´ˆê¸°í™”
            document.getElementById('currentPassword').value = '';
            document.getElementById('newPassword').value = '';
            document.getElementById('newPasswordConfirm').value = '';
            
            resultDiv.innerHTML = '<div style="padding: 10px; background: #d1fae5; color: var(--success); border-radius: 8px;">âœ… ë¹„ë°€ë²ˆí˜¸ê°€ ì„±ê³µì ìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤!</div>';
            
            setTimeout(() => {
                resultDiv.innerHTML = '';
            }, 3000);
        }

        // ë°ì´í„° ì´ˆê¸°í™”
        function clearAllData() {
            if (!confirm('âš ï¸ ì •ë§ë¡œ ëª¨ë“  íˆ¬ì ë°ì´í„°ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\nê³„ì •ì€ ìœ ì§€ë˜ì§€ë§Œ ëª¨ë“  íˆ¬ì ê¸°ë¡ì´ ì‚¬ë¼ì§‘ë‹ˆë‹¤.\n\nì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!')) {
                return;
            }
            
            if (!confirm('âš ï¸ ë§ˆì§€ë§‰ í™•ì¸:\n\nì •ë§ë¡œ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                return;
            }
            
            // ë°ì´í„° ì´ˆê¸°í™”
            appData = {
                principles: [],
                watchlist: [],
                portfolio: [],
                trades: [],
                analysis: [],
                goals: [],
                memos: [],
                mindsetChecks: [],
                emotionDiary: [],
                mistakes: [],
                successes: [],
                quotes: []
            };
            
            saveUserData();
            renderAll();
            updateAccountInfo();
            
            alert('âœ… ëª¨ë“  ë°ì´í„°ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        // ê³„ì • ì‚­ì œ
        function deleteAccount() {
            const confirm = document.getElementById('deleteConfirm').value;
            
            if (confirm !== 'DELETE') {
                alert('âŒ DELETEë¥¼ ì •í™•íˆ ì…ë ¥í•˜ì„¸ìš”.');
                return;
            }
            
            if (!window.confirm('âš ï¸ ìµœì¢… ê²½ê³ !\n\nê³„ì •ê³¼ ëª¨ë“  ë°ì´í„°ê°€ ì˜êµ¬ì ìœ¼ë¡œ ì‚­ì œë©ë‹ˆë‹¤.\në³µêµ¬ê°€ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.\n\nì •ë§ë¡œ ê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                return;
            }
            
            // ì‚¬ìš©ì ë°ì´í„° ì‚­ì œ
            const users = getUsersData();
            delete users[currentUser];
            saveUsersData(users);
            
            // íˆ¬ì ë°ì´í„° ì‚­ì œ
            const userDataKey = `investmentData_${currentUser}`;
            localStorage.removeItem(userDataKey);
            
            // ë¡œê·¸ì•„ì›ƒ
            currentUser = null;
            sessionStorage.removeItem('currentUser');
            
            alert('ê³„ì •ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤. ì´ìš©í•´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.');
            
            // ë¡œê·¸ì¸ í™”ë©´ìœ¼ë¡œ
            showLoginModal();
        }

        // =================
        // ì „ì²´ ë Œë”ë§
        // =================
        function renderAll() {
            renderPrinciples();
            renderWatchlist();
            renderPortfolio();
            renderTrades();
            renderAnalysis();
            renderGoals();
            renderEmotionDiary();
            renderMistakes();
            renderSuccesses();
            renderQuotes();
            renderAccountInfo();
            loadSettings();
            updateDashboard();
            updatePerformance();
            updateMindsetChart();
            updateAccountInfo();
        }
    </script>
</body>
</html>
